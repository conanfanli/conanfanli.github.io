(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var a=window.location.protocol+"//"+window.location.hostname+":"+(window.location.port?"8000":""),r=a+"/api2";function o(e){var t=r+"/"+e.endpoint+"/",n=e.authToken;return fetch(t,{method:"POST",body:JSON.stringify(e.jsonBody),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:n?"JWT "+n:""}})}},109:function(e,t,n){"use strict";n.d(t,"b",function(){return c});var a=n(559),r=n(49),o=n(18),i=n(26),c={balance:"",events:[],categories:[],authToken:null,isAuthenticated:!1,snacks:[],transactions:[]};var l=function(e,t){return function(n,a){return void 0===n&&(n=e),t.hasOwnProperty(a.type)?t[a.type](n,a):n}}(c.snacks,{EAT_SNACK:function(e){return e.slice(1).slice()},ADD_SNACK:function(e,t){return e.concat([t.snack])}}),s=function(e,t,n){return Object(a.a)("BUTLER_ANSWERED",function(t,a){if(!a.response[e])return t;if("replace"===a.updateType)return a.response[e];if("do-nothing"===a.updateType)return t;if("remove"===a.updateType)return t.slice().filter(function(t){return!a.response[e].find(function(e){return e.id===t.id})});if("merge-append"===a.updateType){var o=Object(i.e)(t,a.response[e],"append");return n?r.sortBy(o,n):o}throw new Error("not handled")},t)},u=Object(o.combineReducers)({snacks:l,transactions:s("transactions",c.transactions,function(e){return-1*e.issued_date}),authToken:s("authToken",c.authToken),categories:s("categories",c.categories),events:s("events",c.events,function(e){return-1*new Date(e.created_ts).getTime()}),balance:s("balance",c.balance)});t.a=u},13:function(e,t,n){"use strict";n.d(t,"c",function(){return a});var a,r=n(35);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.d}),function(e){e.Root="/",e.LoginPage="/LoginPage",e.TransactionList="/TransactionList",e.TransactionChart="/TransactionChart",e.CategoryListPage="/CategoryListPage"}(a||(a={}))},177:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n(8),r=n(560),o=n(272),i=n(260),c=n.n(i),l=n(261),s=n.n(l),u=n(0),p=n(124),d=n.n(p),m=n(21),f=n(18),h=n(262),E=n.n(h),g=n(26),b=n(13);c()(d.a.Highcharts),s()(d.a.Highcharts);var y=function(e){return{chart:{type:"column"},title:{text:"Income/Expense Report"},xAxis:{type:"category"},yAxis:{min:0,title:{text:"Spend",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:" dollars"},plotOptions:{bar:{dataLabels:{enabled:!0}},column:{dataLabels:{enabled:!0},allowPointSelect:!1,events:{click:e.onClickColumn}}},legend:{enabled:!0,layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,shadow:!0},credits:{enabled:!1}}},v=function(e){function t(t){var n=e.call(this,t)||this;n.onChangeReportType=function(e){n.showReport(e.target.value)};var a=y({onClickColumn:n.onClickColumn.bind(n)});return n.state={config:a,chart:null,reportTitle:"",report_type:t.initialReportType},n}return a.b(t,e),t.prototype.onClickColumn=function(e){if("INCOME_EXPENSE"===this.state.report_type)return console.log(e)},t.prototype.getReportTitle=function(e){return"INCOME_EXPENSE"==e?"Income/Expense Report":"Expense Report"},t.prototype.showReport=function(e){var t=this,n=new Date,a=new Date;a.setDate(a.getDate()-180);var r="INCOME_EXPENSE"===e?"GetIncomeExpenseReport":"GetExpenseReport";this.props.butler[r]({start_date:Object(g.c)(a),end_date:Object(g.c)(n)},"do-nothing",function(n){var a=E()({title:{text:t.getReportTitle(e)}},t.state.config),r=Object.assign({},a,n.chart_data);t.setState({chart:u.createElement(d.a,{config:r})}),t.setState({report_type:e,config:r})})},t.prototype.componentDidMount=function(){this.showReport(this.state.report_type)},t.prototype.render=function(){return this.state.config?u.createElement("div",null,u.createElement(r.a,{value:this.state.report_type,onChange:this.onChangeReportType},u.createElement(o.a,{value:"INCOME_EXPENSE"},"Income/Expense"),u.createElement(o.a,{value:"EXPENSE"},"Expense")),u.createElement("p",null,this.state.reportTitle),this.state.chart):u.createElement("p",null,"Loading ...")},t}(u.Component),C=Object(m.b)(null,function(e){return{butler:Object(f.bindActionCreators)(b.a,e)}})(v)},180:function(e,t,n){"use strict";var a=n(8),r=n(601),o=n(274),i=n(0),c=n(36),l=n(181),s=n(21),u=n(18),p=n(35),d=(new Date).toISOString().slice(0,10),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={start_date:d,end_date:d},t.importTransactions=function(){"plaid"===t.props.origin?t.props.butler.ImportFromPlaid({start_date:t.state.start_date,end_date:t.state.end_date},"merge-append"):t.props.butler.ImportFromWave({start_date:t.state.start_date,end_date:t.state.end_date},"merge-append")},t.setStartDate=function(e){t.setState({start_date:e.target.value})},t.setEndDate=function(e){t.setState({end_date:e.target.value})},t}return a.b(t,e),t.prototype.render=function(){return i.createElement(r.a,{container:!0},i.createElement(r.a,{item:!0,xs:4},i.createElement(l.a,{type:"date",label:"from",value:this.state.start_date,onChange:this.setStartDate})),i.createElement(r.a,{item:!0,xs:4},i.createElement(l.a,{type:"date",label:"to",defaultValue:d,onChange:this.setEndDate})),i.createElement(r.a,{item:!0,xs:4},i.createElement(o.a,{onClick:this.importTransactions,style:{marginTop:"10px"},color:"primary",variant:"contained"},"Import")))},t}(i.Component),f=Object(s.b)(null,function(e){return{butler:Object(u.bindActionCreators)(p.a,e)}})(m),h=n(625),E=n(602),g=n(560),b=n(272),y=n(603),v=n(604),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onFileInputChange=function(e){var n=e.target.files[0],a=new FileReader;a.addEventListener("load",function(){return t.props.submitFileContent(a.result)},!1),n&&a.readAsText(n)},t}return a.b(t,e),t.prototype.render=function(){var e=this,t=this.props.button||i.createElement(o.a,{variant:"outlined",component:"span"},"Upload");return i.createElement("div",null,i.createElement("input",{id:"file-upload-form",hidden:!0,ref:function(t){return e.fileInput=t},onChange:this.onFileInputChange,type:"file"}),i.createElement("label",{htmlFor:"file-upload-form"},t))},t}(i.Component),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedSource:p.c.CHEQUE},t.onSelectType=function(e){t.setState({selectedSource:e.target.value})},t.submitFileContent=function(e){console.log(e),t.state.selectedSource.length&&e&&t.props.butler.UploadStatement({source:t.state.selectedSource,content:e},"merge-append")},t}return a.b(t,e),t.prototype.render=function(){var e=this;return i.createElement("div",{style:{paddingTop:"10px"}},i.createElement(h.a,{expanded:!0},i.createElement(E.a,null,i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(g.a,{value:this.state.selectedSource,onChange:this.onSelectType},["CHEQUE","PC_MASTER","SCOTIA_MASTER","VISA"].map(function(e){return i.createElement(b.a,{key:e,value:e},e)}))),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(C,{submitFileContent:this.submitFileContent})))),i.createElement(y.a,null),i.createElement(v.a,null,i.createElement(o.a,{size:"small",onClick:function(){e.props.onClose()}},"Cancel"))))},t}(i.Component),_=Object(s.b)(null,function(e){return{butler:Object(u.bindActionCreators)(p.a,e)}})(T),S=n(48),x=n(13),w=n(26),k={issued_date:{type:"date",required:!0},merchant:{type:"text",required:!0},notes:{type:"text",required:!1},category_id:{type:"number",required:!1},balance_adjust:{type:"number",required:!1},total_amount:{type:"number",required:!0}},O=function(e){var t=e.fieldName,n=e.updateField,a=e.instance,r=k[t],o=!1;return r.required&&!a[t]?o=!0:r.required&&"number"===r.type&&!a[t]&&(o=!0),i.createElement(l.a,{type:r.type,required:r.required,error:o,label:t,value:a[t],onChange:n(t)})},j=function(){return{transaction:{issued_date:Object(w.d)(),merchant:"",notes:"",category_id:47,total_amount:"0",balance_adjust:"0"}}},I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=j(),t.createTransaction=function(){t.props.butler.CreateTransaction(t.state.transaction,"merge-append",function(e){t.props.onClose()})},t.updateField=function(e){var n=t.state.transaction;return function(a){var r,o=Object.assign({},n,((r={})[e]=a.target.value,r));t.setState({transaction:o})}},t}return a.b(t,e),t.prototype.isValid=function(){var e=this.state.transaction;return[e.issued_date,e.merchant,+e.total_amount].every(Boolean)},t.prototype.render=function(){var e=this,t=this.props.selectableCategories,n=this.state.transaction;return i.createElement("div",{style:{paddingTop:"10px"}},i.createElement(h.a,{expanded:!0},i.createElement(E.a,null,i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(O,{instance:n,fieldName:"issued_date",updateField:this.updateField})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(O,{fieldName:"merchant",instance:n,updateField:this.updateField})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(O,{fieldName:"total_amount",instance:n,updateField:this.updateField})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(S.a,{instance:n,choices:t.map(function(e){return{value:e.id,label:e.description,mui_icon_id:e.mui_icon_id}}),instancePropNameToUpdate:"category_id",onChange:function(t,n){var a=Object.assign({},e.state.transaction,n);e.setState({transaction:a})}})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(O,{fieldName:"notes",instance:n,updateField:this.updateField})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(O,{fieldName:"balance_adjust",instance:n,updateField:this.updateField})))),i.createElement(y.a,null),i.createElement(v.a,null,i.createElement(o.a,{size:"small",onClick:function(){e.setState(j()),e.props.onClose()}},"Cancel"),i.createElement(o.a,{size:"small",color:"primary",onClick:this.createTransaction,disabled:!this.isValid()},"Save"))))},t}(i.Component),A=Object(s.b)(function(e){return{selectableCategories:Object(c.b)(e),balance:e.balance}},function(e){return{butler:Object(u.bindActionCreators)(x.a,e)}})(I),F=n(607),P=n(608),L=n(624),D=n(249),N=n(78),U=n(600),R=n(558),M=n(555),B=n(609),G=n(610),W=n(611),H=n(612),q=n(613),z=n(614),K=n(121),V=n(49),X=n(605),J=n(270),Q=n(606),$=n(20),Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={anchorEl:null},t.debounced=V.debounce(function(e){return t.props.butler.ListTransactions({search_text:e},"replace",function(t){return Object($.c)(x.c.TransactionList,{search_text:e})})},500),t.onFocus=function(e){t.setState({anchorEl:e.currentTarget})},t.handleClose=function(e){t.setState({anchorEl:null})},t.onSearch=function(e){t.debounced(e.target.value)},t}return a.b(t,e),t.prototype.render=function(){var e=this,t=i.createElement(X.a,{position:"start"},i.createElement(Q.a,null));return i.createElement("div",null,i.createElement(l.a,{onChange:this.onSearch,InputProps:{startAdornment:i.createElement(X.a,{position:"start"},t)}}),i.createElement(J.a,{open:!!this.state.anchorEl,anchorEl:this.state.anchorEl,onClose:this.handleClose,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},this.props.suggestions.map(function(t,n){return i.createElement(b.a,{key:n,onClick:function(){e.props.butler.ListTransactions({},"replace")}},t.label)})))},t}(i.Component),Z=Object(s.b)(function(e,t){return{suggestions:[]}},function(e){return{butler:Object(u.bindActionCreators)(x.a,e)}})(Y),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showNewTransactionForm=function(){t.props.showForm("transaction")},t.showNewStatementForm=function(){t.props.showForm("statement")},t.showPlaidImportForm=function(){t.props.showForm("plaid")},t.showWaveImportForm=function(){t.props.showForm("wave")},t.toggleTimeline=function(){t.props.toggleTimeline()},t}return a.b(t,e),t.prototype.render=function(){return i.createElement(F.a,{position:"static",color:"default"},i.createElement(P.a,null,i.createElement(L.a,{title:"Timeline"},i.createElement(D.a,{onClick:this.toggleTimeline},i.createElement(B.a,null))),this.props.balance?i.createElement(N.a,{variant:"body1",key:"balance"},"Balance: $"+this.props.balance):null,i.createElement("div",{style:{flex:1}}),i.createElement(Z,null),i.createElement(K.b,{icon:i.createElement(G.a,null)},i.createElement(b.a,{key:"new-transaction-menu",onClick:this.showNewTransactionForm},i.createElement(U.a,null,i.createElement(W.a,null)),i.createElement(R.a,null,"Transaction")),i.createElement(b.a,{key:"new-statement-menu",onClick:this.showNewStatementForm},i.createElement(U.a,null,i.createElement(H.a,null)),i.createElement(R.a,null,"Statement")),i.createElement(b.a,{key:"new-wave-menu",onClick:this.showWaveImportForm},i.createElement(U.a,null,i.createElement(q.a,{color:"primary"})),i.createElement(R.a,null,"Wave Import")),i.createElement(b.a,{key:"new-plaid-menu",onClick:this.showPlaidImportForm},i.createElement(U.a,null,i.createElement(z.a,{color:"primary"})),i.createElement(R.a,null,"Plaid Import"))),i.createElement(D.a,{onClick:function(){sessionStorage.removeItem("authToken"),window.location.href="/"}},i.createElement(M.a,{className:"material-icons"},"exit_to_app"))))},t}(i.Component),te=Object(s.b)(function(e,t){return{balance:e.balance}},function(){return{}})(ee),ne=n(617),ae=n(618),re=n(619),oe=n(266),ie=n.n(oe),ce=n(28),le=n(615),se=n(616),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.prediction,a=t.onAccept,o=n.split?"Split ":"";return i.createElement("div",{style:{color:"rgb(0, 188, 212)",fontWeight:"bold"}},""+o+n.category_name+"?",i.createElement(r.a,{container:!0},i.createElement(r.a,{item:!0,xs:12,sm:1},i.createElement(D.a,{onClick:function(){return a()}},i.createElement(le.a,{color:"primary"}))),i.createElement(r.a,{item:!0,xs:12,sm:1},i.createElement(D.a,{onClick:function(){return e.setState({declined:!0})}},i.createElement(se.a,{color:"secondary"})))))},t}(i.Component),pe=function(e){function t(t){var n=e.call(this,t)||this;return n.state={declined:!1},n}return a.b(t,e),t.prototype.onSelectCategory=function(e,t){return this.props.butler.UpdateTransaction({id:e.id,category_id:t.category_id},"merge-append")},t.prototype.render=function(){var e=this.props,t=e.selectableCategories,n=e.transaction;return i.createElement(S.a,{instance:n,choices:t.map(function(e){return{value:e.id,mui_icon_id:e.mui_icon_id,label:e.description}}),instancePropNameToUpdate:"category_id",onChange:this.onSelectCategory.bind(this)})},t}(i.Component),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){return i.createElement(M.a,{style:{color:"blue",float:"left"},className:"material-icons"},"grid_on")},t}(i.Component),me=function(e){var t=e.transaction,n=e.category,a=e.onAccept,o=t.prediction;return o?i.createElement(ue,{prediction:o,onAccept:function(){return a({id:t.id,category_id:o.category_id,balance_adjust:o.split?(parseFloat(t.total_amount)/2).toString():"0"})}}):i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:1},i.createElement(M.a,{className:"material-icons"},n?n.mui_icon_id:null)),i.createElement(r.a,{item:!0,xs:!0},n?i.createElement(N.a,{color:"textSecondary"},n.description):null))},fe=Object(w.a)(function(e){return{selectableCategories:Object(c.b)(e)}})(function(e){var t=e.selectableCategories,n=e.transaction,o=e.expanded,c=e.onToggleExpansion,s=i.useContext(ce.a);return i.createElement("div",null,i.createElement(h.a,{disabled:!n.editable,expanded:o,onChange:c},i.createElement(E.a,null,i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:3,sm:4},i.createElement(N.a,null,Object(w.b)(n.issued_date)),o?null:i.createElement(me,{transaction:n,category:n.category_id&&t.find(function(e){return e.id===n.category_id})||null,onAccept:function(e){s.UpdateTransaction(a.a({},e),"merge-append",function(){return e.balance_adjust?s.GetUserBalance({},"replace"):null})}})),i.createElement(r.a,{item:!0,xs:6,sm:4},n.origin_payload?i.createElement(L.a,{title:i.createElement(ie.a,{shouldExpandNode:function(){return!0},data:n.origin_payload})},n.origin_payload.anchor_account_name?i.createElement(M.a,{style:{color:"blue",float:"left"},className:"material-icons"},"waves"):i.createElement(de,null)):null,i.createElement(N.a,{variant:"body1"},n.merchant),i.createElement("div",null,i.createElement(N.a,{color:"textSecondary"},n.account_name),i.createElement(N.a,{color:"textSecondary"},n.plaid_category),i.createElement(N.a,{color:"textSecondary"},n.notes))),i.createElement(r.a,{item:!0,xs:3,sm:4,style:{paddingLeft:"40px"}},i.createElement(N.a,null,"$"+n.total_amount),+n.balance_adjust&&!o?i.createElement(N.a,{style:{color:+n.balance_adjust>0?"green":"red"}},"$"+n.balance_adjust):null))),i.createElement(ne.a,null,i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(l.a,{defaultValue:n.notes,helperText:"notes",onChange:function(e){return s.UpdateTransaction({id:n.id,notes:e.target.value},"merge-append")}})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(pe,a.a({},{transaction:n,selectableCategories:t,butler:s}))),i.createElement(r.a,{item:!0,xs:6,sm:3},i.createElement(l.a,{helperText:"Balance Adjust",type:"number",defaultValue:n.balance_adjust,onChange:function(e){return s.UpdateTransaction({id:n.id,balance_adjust:e.target.value},"merge-append",function(){return s.GetUserBalance({},"replace")})}})),i.createElement(r.a,{item:!0,xs:6,sm:1,style:{textAlign:"right"}},i.createElement(ae.a,{size:"medium",color:"secondary","aria-label":"Delete",onClick:function(){return s.ArchiveTransaction({id:n.id},"remove")}},i.createElement(re.a,null)))))))}),he=n(554),Ee=n(273),ge=n(620),be=n(621),ye=n(108),ve=function(e){var t=i.useContext(ce.c),n=i.useContext(ce.a),a=e.event,r=t.event_id===a.event_type+"-"+a.id;if(a.event_type===x.b.CHECKPOINT)return i.createElement(Ce,{authToken:e.authToken,disabled:r,checkpoint:a});var c=function(e){if(e.event_type===x.b.CHECKPOINT)return"toll";if(e.event_type===x.b.BATCH_IMPORT)return{plaid:"grid_on",wave:"waves"}[e.origin];if(e.event_type===x.b.STATEMENT_UPLOAD)return"cloud_upload";throw new Error("not possible")}(a),l=function(e){return e.event_type===x.b.CHECKPOINT?"plus_one":null}(a);return i.createElement(Ee.a,{selected:r,disabled:r,button:!0,onClick:function(e){n.ListTransactions({start:0,end:40,event_id:a.event_type+"-"+a.id},"replace",function(e){return Object($.c)(x.c.TransactionList,{event_id:a.event_type+"-"+a.id})})}},i.createElement(U.a,null,i.createElement(L.a,{title:a.event_type},i.createElement(M.a,{color:"primary"},c))),i.createElement(R.a,null,i.createElement(N.a,null,""+new Date(a.created_ts).toLocaleDateString()),i.createElement(N.a,{color:"textSecondary"},function(e){if(e.event_type===x.b.CHECKPOINT){var t=e;return t.signed_ts?"balance: "+t.signed_balance+"  Signed at "+new Date(t.signed_ts).toLocaleDateString():"Not Signed"}if(e.event_type===x.b.BATCH_IMPORT){var n=e;return n.origin+": "+n.start_date+" TO "+n.end_date}if(e.event_type===x.b.STATEMENT_UPLOAD){var a=e;return a.source+": "+a.first_date+" TO "+a.last_date}throw new Error("not possible")}(a))),l?i.createElement(ge.a,null,i.createElement(o.a,null,i.createElement(M.a,null,l))):null)},Ce=function(e){var t=e.authToken,n=e.checkpoint,a=e.disabled,r=i.useContext(ce.a),c=n.signed_ts?"balance: "+n.signed_balance+"  Signed at "+new Date(n.signed_ts).toLocaleDateString():"Not Signed";return i.createElement(Ee.a,{selected:a,disabled:a,button:!0,onClick:function(e){r.ListTransactions({start:0,end:40,event_id:n.event_type+"-"+n.id},"replace",function(e){return Object($.c)(x.c.TransactionList,{event_id:n.event_type+"-"+n.id})})}},i.createElement(U.a,null,i.createElement(L.a,{title:n.event_type},n.signed_ts?i.createElement(M.a,{color:"primary"},"toll"):i.createElement(M.a,{style:{color:"green"}},"fiber_new"))),i.createElement(R.a,null,i.createElement(N.a,null,""+new Date(n.created_ts).toLocaleDateString()),i.createElement(N.a,{color:"textSecondary"},c)),i.createElement(ge.a,null,i.createElement(be.a,{color:"secondary",variant:"contained",size:"small","aria-label":"Small outlined button group"},n.signed_ts?null:i.createElement(o.a,{size:"small",color:"secondary",onClick:function(){return r.SignCheckPoint({id:n.id},"merge-append")}},i.createElement(M.a,null,"plus_one")),i.createElement(o.a,{size:"small",color:"secondary",disabled:!t,onClick:function(){window.open(ye.a+"/export-checkpoint/"+t+"/"+n.id+"/","_blank")}},i.createElement(M.a,null,"cloud_download")))))},Te=Object(w.a)(function(e){return{events:e.events,authToken:Object(c.a)(e)}})(function(e){var t=i.useContext(ce.a);return i.useEffect(function(){t.ListEvents({},"replace")},[]),i.createElement("div",null,i.createElement(he.a,null,e.events.map(function(t,n){return i.createElement(ve,{authToken:e.authToken,event:t,key:n})})))});n.d(t,"a",function(){return xe});var _e=40,Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expandedTransactionId:null,shownForm:null,showTimeline:!0},t.toggleTimeline=function(){return t.setState({showTimeline:!t.state.showTimeline})},t.loadMoreTransactions=function(){var e=t.props.transactions.length,n=e+_e;t.props.butler.ListTransactions({start:e,end:n},"merge-append")},t.showForm=function(e){t.setState({shownForm:e})},t.closeForm=function(){return t.setState({shownForm:null})},t}return a.b(t,e),t.prototype.componentDidMount=function(){this.props.selectableCategories.length||this.props.butler.ListCategories({},"replace"),this.props.butler.GetUserBalance({},"replace"),this.loadMoreTransactions()},t.prototype.onToggleExpansion=function(e){e===this.state.expandedTransactionId?this.setState({expandedTransactionId:null}):this.setState({expandedTransactionId:e})},t.prototype.render=function(){var e=this,t=this.props.selectableCategories,n=this.state.showTimeline;return t&&t.length?i.createElement("div",{style:{maxWidth:"100%"}},i.createElement(te,{toggleTimeline:this.toggleTimeline,showForm:this.showForm}),i.createElement("div",{style:{height:window.innerHeight-70,overflow:"scroll"}},i.createElement(r.a,{container:!0},n?i.createElement(r.a,{item:!0,sm:3},i.createElement(Te,null)):null,i.createElement(r.a,{item:!0,sm:n?9:12},i.createElement("div",{style:{marginBottom:"20px"}},"transaction"===this.state.shownForm?i.createElement(A,{onClose:this.closeForm}):null,"statement"===this.state.shownForm?i.createElement(_,{onClose:this.closeForm}):null,"plaid"===this.state.shownForm?i.createElement(f,{origin:"plaid"}):null,"wave"===this.state.shownForm?i.createElement(f,{origin:"wave"}):null),this.props.transactions.map(function(t){return i.createElement(fe,{expanded:e.state.expandedTransactionId===t.id,key:t.id,transaction:t,onToggleExpansion:function(n,a){return e.onToggleExpansion(t.id)}})}),i.createElement(o.a,{fullWidth:!0,size:"large",color:"secondary",onClick:this.loadMoreTransactions},"(",this.props.transactions.length,") Click to Load More ..."))))):null},t}(i.Component),xe=Object(w.a)(function(e){return{transactions:Object(c.c)(e),selectableCategories:Object(c.b)(e)}})(Se)},182:function(e,t,n){"use strict";var a=n(8),r=n(319),o=n(78),i=n(0),c=n(21),l=n(48),s=n(558),u=n(273),p=n(622),d=n(554),m=function(e){var t=e.ident,n=a.c(e,["ident"]);return t?i.createElement(s.a,a.a({},n,{style:{paddingLeft:56*t+"px"}})):i.createElement(s.a,a.a({},n))};var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){return i.createElement(d.a,null,this.props.root.children.map(function(e){return function e(t,n){return[i.createElement(u.a,{key:t.id},i.createElement(m,{ident:n},i.createElement(p.a,null),t.id))].concat(t.children.map(function(t){return e(t,n+1)}))}(e,0)}).flat(1e3))},t}(i.Component);n.d(t,"a",function(){return E});var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){var e=this;return i.createElement("div",null,i.createElement(f,{root:{id:"1",children:[]}}),i.createElement("div",null,this.props.categories.map(function(t){return e.getCard(t)})))},t.prototype.onSelectIcon=function(e,t){},t.prototype.getCard=function(e){var t=this.props.iconChoices.map(function(e){return{value:e.name,mui_icon_id:e.value,label:e.name}});return i.createElement(r.a,{key:e.id},i.createElement(o.a,{style:{display:"flex"}},e.description),i.createElement(l.a,{style:{flex:1},instance:e,choices:t,instancePropNameToUpdate:"mui_icon_id",onChange:this.onSelectIcon.bind(this)}))},t}(i.Component),E=Object(c.b)(function(e){return{categories:e.categories,iconChoices:[],CategoryTree:{}}},function(e){return{}})(h)},20:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i});var a=n(42),r=Object(a.a)(),o=function(e,t,n){void 0===n&&(n=null);var a=t&&t&&Object.keys(t).length?"?urlState="+JSON.stringify(t):"";return r.push({pathname:e,search:a,state:n})},i=function(){var e=r.location.pathname;return e.endsWith("/")?e.slice(0,e.length-1)||"/":e}},248:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return x});var a=n(8),r=n(554),o=n(273),i=n(558),c=n(87),l=n(18),s=n(0),u=n(267),p=n(21),d=n(182),m=n(28),f=n(13),h=n(256),E=n(20),g=n(259),b=n(177),y=n(36),v=n(180),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){return s.createElement(h.a,null,s.createElement("div",{style:{maxWidth:"100%",flex:8}},s.createElement(m.b.Provider,{value:this.props.state},s.createElement(m.a.Provider,{value:this.props.butler},s.createElement(m.c.Provider,{value:this.props.urlState},s.createElement(S,{isAuthenticated:this.props.isAuthenticated}))))))},t}(s.Component),T=Object(p.b)(function(e,t){return{isAuthenticated:!(!e.authToken&&!sessionStorage.getItem("authToken")),urlState:Object(y.d)(),state:e}},function(e){return{butler:Object(l.bindActionCreators)(f.a,e)}})(C),_=function(){var e={TransactionList:v.a,TransactionChart:b.a,CategoryListPage:d.a};return s.createElement(r.a,null,Object.keys(e).map(function(e,t){return s.createElement(o.a,{key:t,button:!0,onClick:function(){return Object(E.c)(e)}},s.createElement(i.a,{primary:e}))}))},S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){if(Object(E.a)()===f.c.LoginPage)return s.createElement(g.a,null);if(!this.props.isAuthenticated)return console.warn("not authenticated!!!"),Object(E.c)(f.c.LoginPage),s.createElement("div",null);if(Object(E.a)()===f.c.Root)return s.createElement(_,null);if(Object(E.a)()===f.c.TransactionList)return s.createElement(v.a,null);if(Object(E.a)()===f.c.TransactionChart)return s.createElement(b.a,null);if(Object(E.a)()===f.c.CategoryListPage)return s.createElement(d.a,null);throw new Error("Invalid paths: "+Object(E.a)())},t}(s.Component),x=Object(u.hot)(e)(function(){return s.createElement(c.c,null,s.createElement(c.a,{path:"/",component:T}))})}).call(this,n(127)(e))},256:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(8),r=n(0),o=n.n(r),i=(n(199),n(11),n(563),n(48),function(e){var t=Object.assign({},{display:"flex",flexDirection:"row"},e.style),n=Object.assign({},e,{style:t});return o.a.createElement("div",a.a({},n))})},259:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(274),r=n(181),o=n(0),i=n(20),c=n(13),l=n(28),s=function(e){var t=o.useContext(l.a),n=o.useState(""),s=n[0],u=n[1],p=o.useState(""),d=p[0],m=p[1],f=function(){t.AuthenticateUser({username:s,password:d},"replace",function(e){sessionStorage.setItem("authToken",e.authToken),Object(i.c)(c.c.Root)})};return o.createElement("div",{style:{height:window.innerHeight+"px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},o.createElement(r.a,{label:"Username",onChange:function(e){return u(e.target.value)}}),o.createElement("br",null),o.createElement(r.a,{onChange:function(e){return m(e.target.value)},type:"password",label:"Password",onKeyPress:function(e){13==e.charCode&&f()}}),o.createElement("br",null),o.createElement(a.a,{variant:"contained",color:"primary",onClick:function(){return f()}},"Login"))}},26:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return p});var a=n(21),r=n(18),o=n(35);function i(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"})}var c=function(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())};function l(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())}var s=function(e,t,n){return t.reduce(function(t,a){var r=e.findIndex(function(e){return e.id===a.id});return r>=0?t.slice(0,r).concat([a],t.slice(r+1,t.length)):"append"===n?t.concat([a]):[a].concat(t)},e.slice())},u=function(e){return{butler:Object(r.bindActionCreators)(o.a,e)}},p=function(e){return Object(a.b)(e,u)}},28:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var a=n(0),r=n(13),o=n(109),i=a.createContext({}),c=a.createContext(r.a),l=a.createContext(o.b)},35:function(e,t,n){"use strict";var a,r,o;n.d(t,"b",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),function(e){e.ListTransactions="ListTransactions",e.AuthenticateUser="AuthenticateUser",e.ListCategories="ListCategories",e.ListEvents="ListEvents",e.GetUserBalance="GetUserBalance",e.UpdateTransaction="UpdateTransaction",e.GetIncomeExpenseReport="GetIncomeExpenseReport",e.GetExpenseReport="GetExpenseReport",e.UploadStatement="UploadStatement",e.ImportFromPlaid="ImportFromPlaid",e.ImportFromWave="ImportFromWave",e.SignCheckPoint="SignCheckPoint",e.CreateTransaction="CreateTransaction",e.ArchiveTransaction="ArchiveTransaction"}(a||(a={})),function(e){e.CHECKPOINT="CHECKPOINT",e.STATEMENT_UPLOAD="STATEMENT_UPLOAD",e.BATCH_IMPORT="BATCH_IMPORT"}(r||(r={})),function(e){e.PC_MASTER="PC_MASTER",e.SCOTIA_MASTER="SCOTIA_MASTER",e.VISA="VISA",e.CHEQUE="CHEQUE"}(o||(o={}));var i={ListTransactions:function(e,t,n){return function(r){return r({type:a.ListTransactions,route:a.ListTransactions,data:e,updateType:t,successCallback:n})}},AuthenticateUser:function(e,t,n){return function(r){return r({type:a.AuthenticateUser,route:a.AuthenticateUser,data:e,updateType:t,successCallback:n})}},ListCategories:function(e,t,n){return function(r){return r({type:a.ListCategories,route:a.ListCategories,data:e,updateType:t,successCallback:n})}},ListEvents:function(e,t,n){return function(r){return r({type:a.ListEvents,route:a.ListEvents,data:e,updateType:t,successCallback:n})}},GetUserBalance:function(e,t,n){return function(r){return r({type:a.GetUserBalance,route:a.GetUserBalance,data:e,updateType:t,successCallback:n})}},UpdateTransaction:function(e,t,n){return function(r){return r({type:a.UpdateTransaction,route:a.UpdateTransaction,data:e,updateType:t,successCallback:n})}},GetIncomeExpenseReport:function(e,t,n){return function(r){return r({type:a.GetIncomeExpenseReport,route:a.GetIncomeExpenseReport,data:e,updateType:t,successCallback:n})}},GetExpenseReport:function(e,t,n){return function(r){return r({type:a.GetExpenseReport,route:a.GetExpenseReport,data:e,updateType:t,successCallback:n})}},UploadStatement:function(e,t,n){return function(r){return r({type:a.UploadStatement,route:a.UploadStatement,data:e,updateType:t,successCallback:n})}},ImportFromPlaid:function(e,t,n){return function(r){return r({type:a.ImportFromPlaid,route:a.ImportFromPlaid,data:e,updateType:t,successCallback:n})}},ImportFromWave:function(e,t,n){return function(r){return r({type:a.ImportFromWave,route:a.ImportFromWave,data:e,updateType:t,successCallback:n})}},SignCheckPoint:function(e,t,n){return function(r){return r({type:a.SignCheckPoint,route:a.SignCheckPoint,data:e,updateType:t,successCallback:n})}},CreateTransaction:function(e,t,n){return function(r){return r({type:a.CreateTransaction,route:a.CreateTransaction,data:e,updateType:t,successCallback:n})}},ArchiveTransaction:function(e,t,n){return function(r){return r({type:a.ArchiveTransaction,route:a.ArchiveTransaction,data:e,updateType:t,successCallback:n})}}}},36:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return s});var a=n(263),r=n.n(a),o=n(20);function i(e){return e.categories.filter(function(e){return e.is_selectable})}function c(e){return e.transactions||[]}function l(){var e=r.a.parse(o.b.location.search.split("?")[1]);return e&&e.urlState?JSON.parse(e.urlState):{}}var s=function(e){return e.authToken||sessionStorage.getItem("authToken")||""}},48:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(8),r=n(274),o=n(555),i=n(561),c=n(556),l=n(557),s=n(49),u=n.n(s),p=n(0),d=n(121),m=function(e){function t(t){var n=e.call(this,t)||this;return n.getInitialOption=function(){var e=u.a.get(n.props.instance,n.props.instancePropNameToUpdate,null);if(!e)return null;var t=n.props.choices.find(function(t){return t.value===e});if(!t)throw new Error(e+" not found ");return t},n.openDialog=function(e){n.setState({openDialog:!0})},n.closeDialog=function(){n.setState({openDialog:!1})},n.onSelectOption=function(e){var t,a=n.props;(0,a.onChange)(a.instance,((t={})[a.instancePropNameToUpdate]=e.value,t)),n.closeDialog()},n.state={openDialog:!1},n}return a.b(t,e),t.prototype.render=function(){var e=this.props.choices,t=this.getInitialOption();return p.createElement("div",null,p.createElement(r.a,{onClick:this.openDialog,variant:"outlined",color:"primary"},t?p.createElement(o.a,{style:{marginRight:"5px"}},t.mui_icon_id):null,t?t.label:"Select A Category"),p.createElement(i.a,{open:this.state.openDialog,fullWidth:!0,onClose:this.closeDialog},p.createElement(c.a,null,"Select a category"),p.createElement(l.a,null,p.createElement(d.a,{onSelectOption:this.onSelectOption,defaultValue:t?t.value:void 0,placeholder:"Select a category",options:e}))))},t}(p.Component)},553:function(e,t,n){"use strict";n.r(t);var a,r,o=n(0),i=n(12),c=n(21),l=n(87),s=n(20),u=(n(292),n(18)),p=n(246),d=n.n(p),m=n(247),f=n(108),h=n(13),E=n(35),g=function(e){return function(t){return function(n){return n&&E.b[n.type]&&Object(f.b)({endpoint:n.route,jsonBody:n.data,authToken:sessionStorage.getItem("authToken")||e.getState().authToken||""}).then(function(t){t.ok?t.json().then(function(t){e.dispatch({type:"BUTLER_ANSWERED",updateType:n.updateType,response:t}),n.successCallback&&n.successCallback(t)}):401===t.status&&(sessionStorage.removeItem("jwt"),Object(s.c)(h.c.LoginPage))}),t(n)}}},b=n(109),y=n(248),v=(r=Object(u.applyMiddleware)(m.a,g,d()()),Object(u.createStore)(b.a,a,r));i.render(o.createElement(c.a,{store:v},o.createElement(l.b,{history:s.b},o.createElement(y.a,null))),document.getElementById("root"))}},[[553,1,2]]]);