(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"c",function(){return a});var a,r=n(34);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.d}),function(e){e.Root="/",e.LoginPage="/LoginPage",e.TransactionList="/TransactionList",e.TransactionChart="/TransactionChart",e.CategoryPage="/CategoryPage"}(a||(a={}))},111:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var a=window.location.protocol+"//"+window.location.hostname+":"+(window.location.port?"8000":""),r=a+"/api2";function o(e){var t=r+"/"+e.endpoint+"/",n=e.authToken;return fetch(t,{method:"POST",body:JSON.stringify(e.jsonBody),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:n?"JWT "+n:""}})}},112:function(e,t,n){"use strict";n.d(t,"b",function(){return i});var a=n(553),r=n(26),o=n(18),c=n(23),i={balance:"",user_id:0,events:[],categories:[],authToken:null,isAuthenticated:!1,snacks:[],transactions:[]};var l=function(e,t){return function(n,a){return void 0===n&&(n=e),t.hasOwnProperty(a.type)?t[a.type](n,a):n}}(i.snacks,{EAT_SNACK:function(e){return e.slice(1).slice()},ADD_SNACK:function(e,t){return e.concat([t.snack])}}),u=function(e,t,n){return Object(a.a)("BUTLER_ANSWERED",function(t,a){if(!a.response[e])return t;if("replace"===a.updateType)return a.response[e];if("do-nothing"===a.updateType)return t;if("remove"===a.updateType)return t.slice().filter(function(t){return!a.response[e].find(function(e){return e.id===t.id})});if("merge-append"===a.updateType){var o=Object(c.e)(t,a.response[e],"append");return n?r.sortBy(o,n):o}throw new Error("not handled")},t)},s=Object(o.combineReducers)({snacks:l,transactions:u("transactions",i.transactions,function(e){return-1*e.issued_date}),authToken:u("authToken",i.authToken),categories:u("categories",i.categories),events:u("events",i.events,function(e){return-1*new Date(e.created_ts).getTime()}),balance:u("balance",i.balance),user_id:u("user_id",i.balance)});t.a=s},179:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n(13),r=n(554),o=n(267),c=n(257),i=n.n(c),l=n(258),u=n.n(l),s=n(0),d=n(126),p=n.n(d),m=n(22),f=n(18),E=n(259),g=n.n(E),h=n(23),b=n(10);i()(p.a.Highcharts),u()(p.a.Highcharts);var y=function(e){return{chart:{type:"column"},title:{text:"Income/Expense Report"},xAxis:{type:"category"},yAxis:{min:0,title:{text:"Spend",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:" dollars"},plotOptions:{bar:{dataLabels:{enabled:!0}},column:{dataLabels:{enabled:!0},allowPointSelect:!1,events:{click:e.onClickColumn}}},legend:{enabled:!0,layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,shadow:!0},credits:{enabled:!1}}},v=function(e){function t(t){var n=e.call(this,t)||this;n.onChangeReportType=function(e){n.showReport(e.target.value)};var a=y({onClickColumn:n.onClickColumn.bind(n)});return n.state={config:a,chart:null,reportTitle:"",report_type:t.initialReportType},n}return a.b(t,e),t.prototype.onClickColumn=function(e){if("INCOME_EXPENSE"===this.state.report_type)return console.log(e)},t.prototype.getReportTitle=function(e){return"INCOME_EXPENSE"==e?"Income/Expense Report":"Expense Report"},t.prototype.showReport=function(e){var t=this,n=new Date,a=new Date;a.setDate(a.getDate()-180);var r="INCOME_EXPENSE"===e?"GetIncomeExpenseReport":"GetExpenseReport";this.props.butler[r]({start_date:Object(h.c)(a),end_date:Object(h.c)(n)},"do-nothing",function(n){var a=g()({title:{text:t.getReportTitle(e)}},t.state.config),r=Object.assign({},a,n.chart_data);t.setState({chart:s.createElement(p.a,{config:r})}),t.setState({report_type:e,config:r})})},t.prototype.componentDidMount=function(){this.showReport(this.state.report_type)},t.prototype.render=function(){return this.state.config?s.createElement("div",null,s.createElement(r.a,{value:this.state.report_type,onChange:this.onChangeReportType},s.createElement(o.a,{value:"INCOME_EXPENSE"},"Income/Expense"),s.createElement(o.a,{value:"EXPENSE"},"Expense")),s.createElement("p",null,this.state.reportTitle),this.state.chart):s.createElement("p",null,"Loading ...")},t}(s.Component),C=Object(m.b)(null,function(e){return{butler:Object(f.bindActionCreators)(b.a,e)}})(v)},182:function(e,t,n){"use strict";var a=n(26),r=n(605),o=n(185),c=n(0),i=n(35),l=n(13),u=n(183),s=n(22),d=n(18),p=n(34),m=(new Date).toISOString().slice(0,10),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={start_date:m,end_date:m},t.importTransactions=function(){"plaid"===t.props.origin?t.props.butler.ImportFromPlaid({start_date:t.state.start_date,end_date:t.state.end_date},"merge-append"):t.props.butler.ImportFromWave({start_date:t.state.start_date,end_date:t.state.end_date},"merge-append")},t.setStartDate=function(e){t.setState({start_date:e.target.value})},t.setEndDate=function(e){t.setState({end_date:e.target.value})},t}return l.b(t,e),t.prototype.render=function(){return c.createElement(r.a,{container:!0},c.createElement(r.a,{item:!0,xs:4},c.createElement(u.a,{type:"date",label:"from",value:this.state.start_date,onChange:this.setStartDate})),c.createElement(r.a,{item:!0,xs:4},c.createElement(u.a,{type:"date",label:"to",defaultValue:m,onChange:this.setEndDate})),c.createElement(r.a,{item:!0,xs:4},c.createElement(o.a,{onClick:this.importTransactions,style:{marginTop:"10px"},color:"primary",variant:"contained"},"Import")))},t}(c.Component),E=Object(s.b)(null,function(e){return{butler:Object(d.bindActionCreators)(p.a,e)}})(f),g=n(628),h=n(606),b=n(554),y=n(267),v=n(607),C=n(608),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onFileInputChange=function(e){var n=e.target.files[0],a=new FileReader;a.addEventListener("load",function(){return t.props.submitFileContent(a.result)},!1),n&&a.readAsText(n)},t}return l.b(t,e),t.prototype.render=function(){var e=this,t=this.props.button||c.createElement(o.a,{variant:"outlined",component:"span"},"Upload");return c.createElement("div",null,c.createElement("input",{id:"file-upload-form",hidden:!0,ref:function(t){return e.fileInput=t},onChange:this.onFileInputChange,type:"file"}),c.createElement("label",{htmlFor:"file-upload-form"},t))},t}(c.Component),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedSource:p.c.CHEQUE},t.onSelectType=function(e){t.setState({selectedSource:e.target.value})},t.submitFileContent=function(e){console.log(e),t.state.selectedSource.length&&e&&t.props.butler.UploadStatement({source:t.state.selectedSource,content:e},"merge-append")},t}return l.b(t,e),t.prototype.render=function(){var e=this;return c.createElement("div",{style:{paddingTop:"10px"}},c.createElement(g.a,{expanded:!0},c.createElement(h.a,null,c.createElement(r.a,{container:!0,spacing:10},c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(b.a,{value:this.state.selectedSource,onChange:this.onSelectType},["CHEQUE","PC_MASTER","SCOTIA_MASTER","VISA"].map(function(e){return c.createElement(y.a,{key:e,value:e},e)}))),c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(_,{submitFileContent:this.submitFileContent})))),c.createElement(v.a,null),c.createElement(C.a,null,c.createElement(o.a,{size:"small",onClick:function(){e.props.onClose()}},"Cancel"))))},t}(c.Component),S=Object(s.b)(null,function(e){return{butler:Object(d.bindActionCreators)(p.a,e)}})(T),k=n(75),x=n(10),O=n(23),w={issued_date:{type:"date",required:!0},merchant:{type:"text",required:!0},notes:{type:"text",required:!1},category_id:{type:"number",required:!1},balance_adjust:{type:"number",required:!1},total_amount:{type:"number",required:!0}},j=function(e){var t=e.fieldName,n=e.updateField,a=e.instance,r=w[t],o=!1;return r.required&&!a[t]?o=!0:r.required&&"number"===r.type&&!a[t]&&(o=!0),c.createElement(u.a,{type:r.type,required:r.required,error:o,label:t,value:a[t],onChange:n(t)})},A=function(){return{transaction:{issued_date:Object(O.d)(),merchant:"",notes:"",category_id:47,total_amount:"0",balance_adjust:"0"}}},I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=A(),t.createTransaction=function(){t.props.butler.CreateTransaction(t.state.transaction,"merge-append",function(e){t.props.onClose()})},t.updateField=function(e){var n=t.state.transaction;return function(a){var r,o=Object.assign({},n,((r={})[e]=a.target.value,r));t.setState({transaction:o})}},t}return l.b(t,e),t.prototype.isValid=function(){var e=this.state.transaction;return[e.issued_date,e.merchant,+e.total_amount].every(Boolean)},t.prototype.render=function(){var e=this,t=this.props.selectableCategories,n=this.state.transaction;return c.createElement("div",{style:{paddingTop:"10px"}},c.createElement(g.a,{expanded:!0},c.createElement(h.a,null,c.createElement(r.a,{container:!0,spacing:10},c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(j,{instance:n,fieldName:"issued_date",updateField:this.updateField})),c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(j,{fieldName:"merchant",instance:n,updateField:this.updateField})),c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(j,{fieldName:"total_amount",instance:n,updateField:this.updateField})),c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(k.a,{instance:n,choices:t.map(function(e){return{value:e.id,label:e.description,mui_icon_id:e.mui_icon_id}}),instancePropNameToUpdate:"category_id",onChange:function(t,n){var a=Object.assign({},e.state.transaction,n);e.setState({transaction:a})}})),c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(j,{fieldName:"notes",instance:n,updateField:this.updateField})),c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(j,{fieldName:"balance_adjust",instance:n,updateField:this.updateField})))),c.createElement(v.a,null),c.createElement(C.a,null,c.createElement(o.a,{size:"small",onClick:function(){e.setState(A()),e.props.onClose()}},"Cancel"),c.createElement(o.a,{size:"small",color:"primary",onClick:this.createTransaction,disabled:!this.isValid()},"Save"))))},t}(c.Component),P=Object(s.b)(function(e){return{selectableCategories:Object(i.b)(e),balance:e.balance}},function(e){return{butler:Object(d.bindActionCreators)(x.a,e)}})(I),L=n(611),U=n(612),N=n(629),D=n(249),R=n(82),F=n(599),M=n(549),B=n(548),G=n(613),H=n(614),W=n(615),q=n(616),z=n(617),K=n(618),V=n(124),X=n(21),J=n(609),Q=n(266),$=n(610),Y=n(19),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={anchorEl:null},t.debounced=a.debounce(function(e){return t.props.butler.ListTransactions({search_text:e},"replace",function(t){return Object(Y.c)(x.c.TransactionList,{search_text:e})})},500),t.onFocus=function(e){t.setState({anchorEl:e.currentTarget})},t.handleClose=function(e){t.setState({anchorEl:null})},t.onSearch=function(e){t.debounced(e.target.value)},t}return l.b(t,e),t.prototype.render=function(){var e=this,t=c.createElement(J.a,{position:"start"},c.createElement($.a,null));return c.createElement("div",null,c.createElement(u.a,{onChange:this.onSearch,InputProps:{startAdornment:c.createElement(J.a,{position:"start"},t)}}),c.createElement(Q.a,{open:!!this.state.anchorEl,anchorEl:this.state.anchorEl,onClose:this.handleClose,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},this.props.suggestions.map(function(t,n){return c.createElement(y.a,{key:n,onClick:function(){e.props.butler.ListTransactions({},"replace")}},t.label)})))},t}(c.Component),ee=Object(s.b)(function(e,t){return{suggestions:[]}},function(e){return{butler:Object(d.bindActionCreators)(x.a,e)}})(Z),te=Object(O.a)(function(e){return{balance:e.balance}})(function(e){var t=c.useContext(X.a);return c.useEffect(function(){e.balance||t.GetUserBalance({},"replace")}),c.createElement(L.a,{position:"static",color:"default"},c.createElement(U.a,null,c.createElement(N.a,{title:"Timeline"},c.createElement(D.a,{onClick:function(){e.toggleTimeline()}},c.createElement(G.a,null))),e.balance?c.createElement(R.a,{variant:"body1",key:"balance"},"Balance: $"+e.balance):null,c.createElement("div",{style:{flex:1}}),c.createElement(ee,null),c.createElement(V.b,{icon:c.createElement(H.a,null)},c.createElement(y.a,{key:"new-transaction-menu",onClick:function(){e.showForm("transaction")}},c.createElement(F.a,null,c.createElement(W.a,null)),c.createElement(M.a,null,"Transaction")),c.createElement(y.a,{key:"new-statement-menu",onClick:function(){e.showForm("statement")}},c.createElement(F.a,null,c.createElement(q.a,null)),c.createElement(M.a,null,"Statement")),c.createElement(y.a,{key:"new-wave-menu",onClick:function(){e.showForm("wave")}},c.createElement(F.a,null,c.createElement(z.a,{color:"primary"})),c.createElement(M.a,null,"Wave Import")),c.createElement(y.a,{key:"new-plaid-menu",onClick:function(){e.showForm("plaid")}},c.createElement(F.a,null,c.createElement(K.a,{color:"primary"})),c.createElement(M.a,null,"Plaid Import"))),c.createElement(D.a,{onClick:function(){sessionStorage.removeItem("authToken"),window.location.href="/"}},c.createElement(B.a,{className:"material-icons"},"exit_to_app"))))}),ne=n(621),ae=n(622),re=n(623),oe=n(262),ce=n.n(oe),ie=n(619),le=n(620),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.b(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.prediction,a=t.onAccept,o=n.split?"Split ":"";return c.createElement("div",{style:{color:"rgb(0, 188, 212)",fontWeight:"bold"}},""+o+n.category_name+"?",c.createElement(r.a,{container:!0},c.createElement(r.a,{item:!0,xs:12,sm:1},c.createElement(D.a,{onClick:function(){return a()}},c.createElement(ie.a,{color:"primary"}))),c.createElement(r.a,{item:!0,xs:12,sm:1},c.createElement(D.a,{onClick:function(){return e.setState({declined:!0})}},c.createElement(le.a,{color:"secondary"})))))},t}(c.Component),se=function(e){function t(t){var n=e.call(this,t)||this;return n.state={declined:!1},n}return l.b(t,e),t.prototype.onSelectCategory=function(e,t){return this.props.butler.UpdateTransaction({id:e.id,category_id:t.category_id},"merge-append")},t.prototype.render=function(){var e=this.props,t=e.selectableCategories,n=e.transaction;return t.length?c.createElement(k.a,{instance:n,choices:t.map(function(e){return{value:e.id,mui_icon_id:e.mui_icon_id,label:e.description}}),instancePropNameToUpdate:"category_id",onChange:this.onSelectCategory.bind(this)}):c.createElement("div",null)},t}(c.Component),de=function(e){var t=e.helperText,n=e.setter,r=e.onBounce,o=e.type,i=e.value,l=c.useCallback(a.debounce(r,1e3),[]);return c.createElement(u.a,{helperText:t,type:o,onChange:function(e){n(e.target.value),l(e.target.value)},value:i})},pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.b(t,e),t.prototype.render=function(){return c.createElement(B.a,{style:{color:"blue",float:"left"},className:"material-icons"},"grid_on")},t}(c.Component),me=function(e){var t=e.transaction,n=e.category,a=e.onAccept,o=t.prediction,i=e.user_id===t.lender_id?1:-1;return o?c.createElement(ue,{prediction:o,onAccept:function(){return a({id:t.id,category_id:o.category_id,balance_adjust:o.split?(i*parseFloat(t.total_amount)/2).toString():"0"})}}):c.createElement(r.a,{container:!0,spacing:10},c.createElement(r.a,{item:!0,xs:1},c.createElement(B.a,{className:"material-icons"},n?n.mui_icon_id:null)),c.createElement(r.a,{item:!0,xs:!0},n?c.createElement(R.a,{color:"textSecondary"},n.description):null))},fe=Object(O.a)(function(e){return{selectableCategories:Object(i.b)(e),user_id:e.user_id}})(c.memo(function(e){var t=e.user_id,n=e.selectableCategories,a=e.transaction,o=e.expanded,i=e.onToggleExpansion,u=c.useContext(X.a);console.log("render row");var s=c.useState(a.balance_adjust),d=s[0],p=s[1];return c.createElement("div",null,c.createElement(g.a,{disabled:!a.editable,expanded:o,onChange:i},c.createElement(h.a,null,c.createElement(r.a,{container:!0,spacing:10},c.createElement(r.a,{item:!0,xs:3,sm:4},c.createElement(R.a,null,Object(O.b)(a.issued_date)),o?null:c.createElement(me,{user_id:t,transaction:a,category:a.category_id&&n.find(function(e){return e.id===a.category_id})||null,onAccept:function(e){u.UpdateTransaction(l.a({},e),"merge-append",function(){return e.balance_adjust?u.GetUserBalance({},"replace"):null})}})),c.createElement(r.a,{item:!0,xs:6,sm:4},a.origin_payload?c.createElement(N.a,{title:c.createElement(ce.a,{shouldExpandNode:function(){return!0},data:a.origin_payload})},a.origin_payload.anchor_account_name?c.createElement(B.a,{style:{color:"blue",float:"left"},className:"material-icons"},"waves"):c.createElement(pe,null)):null,c.createElement(R.a,{variant:"body1"},a.merchant),c.createElement("div",null,c.createElement(R.a,{color:"textSecondary"},a.account_name),c.createElement(R.a,{color:"textSecondary"},a.plaid_category),c.createElement(R.a,{color:"textSecondary"},a.notes))),c.createElement(r.a,{item:!0,xs:3,sm:4,style:{paddingLeft:"40px"}},c.createElement(R.a,null,"$"+a.total_amount),+a.balance_adjust&&!o?c.createElement(R.a,{style:{color:+a.balance_adjust>0?"green":"red"}},"$"+a.balance_adjust):null))),c.createElement(ne.a,null,c.createElement(r.a,{container:!0,spacing:10},c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(de,{helperText:"notes",setter:function(){},onBounce:function(e){return u.UpdateTransaction({id:a.id,notes:e},"merge-append")}})),c.createElement(r.a,{item:!0,xs:6,sm:4},c.createElement(se,l.a({},{transaction:a,selectableCategories:n,butler:u}))),c.createElement(r.a,{item:!0,xs:6,sm:3},c.createElement(de,{type:"number",helperText:"Balance Adjust",value:d,setter:p,onBounce:function(e){u.UpdateTransaction({id:a.id,balance_adjust:e},"merge-append",function(){return u.GetUserBalance({},"replace")})}})),c.createElement(r.a,{item:!0,xs:6,sm:1,style:{textAlign:"right"}},c.createElement(ae.a,{size:"medium",color:"secondary","aria-label":"Delete",onClick:function(){return u.ArchiveTransaction({id:a.id},"remove")}},c.createElement(re.a,null)))))))},function(e,t){return!(!a.isEqual(e.transaction,t.transaction)||e.expanded!==t.expanded||e.selectableCategories.length!==t.selectableCategories.length)})),Ee=n(547),ge=n(268),he=n(604),be=n(624),ye=n(111),ve=function(e){var t=c.useContext(X.c),n=c.useContext(X.a),a=e.event,r=t.event_id===a.event_type+"-"+a.id;if(a.event_type===x.b.CHECKPOINT)return c.createElement(Ce,{authToken:e.authToken,disabled:r,checkpoint:a});var i=function(e){if(e.event_type===x.b.CHECKPOINT)return"toll";if(e.event_type===x.b.BATCH_IMPORT)return{plaid:"grid_on",wave:"waves"}[e.origin];if(e.event_type===x.b.STATEMENT_UPLOAD)return"cloud_upload";throw new Error("not possible")}(a),l=function(e){return e.event_type===x.b.CHECKPOINT?"plus_one":null}(a);return c.createElement(ge.a,{selected:r,disabled:r,button:!0,onClick:function(e){n.ListTransactions({start:0,end:40,event_id:a.event_type+"-"+a.id},"replace",function(e){return Object(Y.c)(x.c.TransactionList,{event_id:a.event_type+"-"+a.id})})}},c.createElement(F.a,null,c.createElement(N.a,{title:a.event_type},c.createElement(B.a,{color:"primary"},i))),c.createElement(M.a,null,c.createElement(R.a,null,""+new Date(a.created_ts).toLocaleDateString()),c.createElement(R.a,{color:"textSecondary"},function(e){if(e.event_type===x.b.CHECKPOINT){var t=e;return t.signed_ts?"balance: "+t.signed_balance+"  Signed at "+new Date(t.signed_ts).toLocaleDateString():"Not Signed"}if(e.event_type===x.b.BATCH_IMPORT){var n=e;return n.origin+": "+n.start_date+" TO "+n.end_date}if(e.event_type===x.b.STATEMENT_UPLOAD){var a=e;return a.source+": "+a.first_date+" TO "+a.last_date}throw new Error("not possible")}(a))),l?c.createElement(he.a,null,c.createElement(o.a,null,c.createElement(B.a,null,l))):null)},Ce=function(e){var t=e.authToken,n=e.checkpoint,a=e.disabled,r=c.useContext(X.a),i=n.signed_ts?"balance: "+n.signed_balance+"  Signed at "+new Date(n.signed_ts).toLocaleDateString():"Not Signed";return c.createElement(ge.a,{selected:a,disabled:a,button:!0,onClick:function(e){r.ListTransactions({start:0,end:40,event_id:n.event_type+"-"+n.id},"replace",function(e){return Object(Y.c)(x.c.TransactionList,{event_id:n.event_type+"-"+n.id})})}},c.createElement(F.a,null,c.createElement(N.a,{title:n.event_type},n.signed_ts?c.createElement(B.a,{color:"primary"},"toll"):c.createElement(B.a,{style:{color:"green"}},"fiber_new"))),c.createElement(M.a,null,c.createElement(R.a,null,""+new Date(n.created_ts).toLocaleDateString()),c.createElement(R.a,{color:"textSecondary"},i)),c.createElement(he.a,null,c.createElement(be.a,{color:"secondary",variant:"contained",size:"small","aria-label":"Small outlined button group"},n.signed_ts?null:c.createElement(o.a,{size:"small",color:"secondary",onClick:function(){return r.SignCheckPoint({id:n.id},"merge-append")}},c.createElement(B.a,null,"plus_one")),c.createElement(o.a,{size:"small",color:"secondary",disabled:!t,onClick:function(){window.open(ye.a+"/export-checkpoint/"+t+"/"+n.id+"/","_blank")}},c.createElement(B.a,null,"cloud_download")))))},_e=Object(O.a)(function(e){return{events:e.events,authToken:Object(i.a)(e)}})(function(e){var t=c.useContext(X.a);return c.useEffect(function(){t.ListEvents({},"replace")},[]),c.createElement("div",null,c.createElement(Ee.a,null,e.events.map(function(t,n){return c.createElement(ve,{authToken:e.authToken,event:t,key:n})})))});n.d(t,"a",function(){return Te});var Te=Object(O.a)(function(e){return{transactions:Object(i.c)(e),selectableCategories:Object(i.b)(e)}})(c.memo(function(e){console.log("rerender list");var t=c.useState(!0),n=t[0],a=t[1],i=c.useState(null),l=i[0],u=i[1],s=c.useState(null),d=s[0],p=s[1],m=function(){var t=e.transactions.length,n=t+40;e.butler.ListTransactions({start:t,end:n},"merge-append")};c.useEffect(function(){e.selectableCategories.length||(e.butler.ListCategories({},"replace"),m())});return c.createElement("div",{style:{maxWidth:"100%"}},c.createElement(te,{toggleTimeline:a,showForm:function(e){u(e)}}),c.createElement("div",{style:{height:window.innerHeight-70,overflow:"scroll"}},c.createElement(r.a,{container:!0},n?c.createElement(r.a,{item:!0,sm:3},c.createElement(_e,null)):null,c.createElement(r.a,{item:!0,sm:n?9:12},c.createElement("div",{style:{marginBottom:"20px"}},"transaction"===l?c.createElement(P,{onClose:function(){return u(null)}}):null,"statement"===l?c.createElement(S,{onClose:function(){return u(null)}}):null,"plaid"===l?c.createElement(E,{origin:"plaid"}):null,"wave"===l?c.createElement(E,{origin:"wave"}):null),e.transactions.map(function(e){return c.createElement(fe,{expanded:d===e.id,key:e.id,transaction:e,onToggleExpansion:function(t,n){return p(e.id)}})}),c.createElement(o.a,{fullWidth:!0,size:"large",color:"secondary",onClick:m},"(",e.transactions.length,") Click to Load More ...")))))},function(e,t){return!(e.selectableCategories.length!==t.selectableCategories.length||!a.isEqual(e.transactions,t.transactions))}))},184:function(e,t,n){"use strict";var a=n(0),r=n(600),o=n(627),c=n(547),i=n(268),l=n(599),u=n(548),s=n(549),d=n(603),p=n(183),m=n(604),f=n(249),E=n(601),g=n(602),h=n(554),b=n(267),y=n(82),v=["attach_money","beach_access","cake","compare_arrows","free_breakfast","gavel","home","local_activity","local_bar","local_car_wash","local_gas_station","local_grocery_store","local_hospital","local_parking","local_taxi","motorcycle","movie","not_interested","perm_scan_wifi","phone_iphone","power","question_mark","restaurant","rowing","school","settings_input_component","settings_input_hdmi","shopping_basket","subway","theaters"],C=function(e){var t=e.initialValue;return a.createElement(h.a,{value:t},v.map(function(e){return a.createElement(b.a,{key:e,value:e},a.createElement(l.a,null,a.createElement(u.a,{color:"primary"},e)),a.createElement(y.a,{style:{float:"right"}},e))}))},_=Object(r.a)(function(e){return Object(o.a)({node:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}})}),T=function(e){var t=e.node,n=e.level,r=void 0===n?0:n,o=e.onSaveNode,p=_(),m=a.useState(!0),f=m[0],h=m[1];return a.createElement(c.a,{component:"nav",className:p.node},a.createElement(i.a,{button:!0,onClick:function(){h(!f)},style:{paddingLeft:32*r+"px"}},a.createElement(l.a,null,a.createElement(u.a,{color:"secondary"},t.mui_icon_id)),a.createElement(s.a,{primary:t.name}),f?a.createElement(E.a,null):a.createElement(g.a,null)),a.createElement(d.a,{in:f,timeout:"auto",unmountOnExit:!0},a.createElement(c.a,{component:"div",disablePadding:!0},t.children.map(function(e){return e.children.length?a.createElement(T,{onSaveNode:o,key:e.id,node:e,level:r+1}):a.createElement(S,{onSaveNode:o,key:e.id,node:e,level:r+1})}))))},S=function(e){var t=e.node,n=e.level,r=e.onSaveNode,o=a.useState(!1),c=o[0],l=o[1],d=a.useState(!1),E=d[0],g=d[1],h=a.useState(t.name),b=h[0],y=h[1];return a.createElement(a.Fragment,null,a.createElement(i.a,{key:t.id,dense:!0,button:!0,role:void 0,style:{paddingLeft:32*(n+1)+"px"}},c?a.createElement(p.a,{autoFocus:!0,value:b,onChange:function(e){return y(e.target.value)},onBlur:function(){l(!1),r(t.id,b)}}):a.createElement(a.Fragment,null,E?a.createElement(C,{initialValue:t.mui_icon_id}):a.createElement(s.a,{onClick:function(){return l(!0)},primary:b}),a.createElement(m.a,null,a.createElement(f.a,{onClick:function(){return g(!0)},edge:"end"},a.createElement(u.a,{color:"primary"},t.mui_icon_id))))))},k=n(21);n.d(t,"a",function(){return x});var x=function(e){var t=a.useContext(k.a),n=a.useState(null),r=n[0],o=n[1];return a.useEffect(function(){r||t.TreefyCategories({},"replace",function(e){o(e.root)})}),r?a.createElement(T,{onSaveNode:function(e,n){return t.UpdateCategory({id:e,name:n},"do-nothing")},node:r}):a.createElement("div",null)}},19:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return c});var a=n(46),r=Object(a.a)(),o=function(e,t,n){void 0===n&&(n=null);var a=t&&t&&Object.keys(t).length?"?urlState="+JSON.stringify(t):"";return r.push({pathname:e,search:a,state:n})},c=function(){var e=r.location.pathname;return e.endsWith("/")?e.slice(0,e.length-1)||"/":e}},21:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return l});var a=n(0),r=n(10),o=n(112),c=a.createContext({}),i=a.createContext(r.a),l=a.createContext(o.b)},23:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"a",function(){return d});var a=n(22),r=n(18),o=n(34);function c(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"})}var i=function(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())};function l(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())}var u=function(e,t,n){return t.reduce(function(t,a){var r=e.findIndex(function(e){return e.id===a.id});return r>=0?t.slice(0,r).concat([a],t.slice(r+1,t.length)):"append"===n?t.concat([a]):[a].concat(t)},e.slice())},s=function(e){return{butler:Object(r.bindActionCreators)(o.a,e)}},d=function(e){return Object(a.b)(e,s)}},246:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return k});var a=n(13),r=n(547),o=n(268),c=n(549),i=n(93),l=n(18),u=n(0),s=n(263),d=n(22),p=n(184),m=n(21),f=n(10),E=n(250),g=n(19),h=n(256),b=n(179),y=n(35),v=n(182),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){return u.createElement(E.a,null,u.createElement("div",{style:{maxWidth:"100%",flex:8}},u.createElement(m.b.Provider,{value:this.props.state},u.createElement(m.a.Provider,{value:this.props.butler},u.createElement(m.c.Provider,{value:this.props.urlState},u.createElement(S,{isAuthenticated:this.props.isAuthenticated}))))))},t}(u.Component),_=Object(d.b)(function(e,t){return{isAuthenticated:!(!e.authToken&&!sessionStorage.getItem("authToken")),urlState:Object(y.d)(),state:e}},function(e){return{butler:Object(l.bindActionCreators)(f.a,e)}})(C),T=function(){var e={TransactionList:v.a,TransactionChart:b.a,CategoryPage:p.a};return u.createElement(r.a,null,Object.keys(e).map(function(e,t){return u.createElement(o.a,{key:t,button:!0,onClick:function(){return Object(g.c)(e)}},u.createElement(c.a,{primary:e}))}))},S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){if(Object(g.a)()===f.c.LoginPage)return u.createElement(h.a,null);if(!this.props.isAuthenticated)return console.warn("not authenticated!!!"),Object(g.c)(f.c.LoginPage),u.createElement("div",null);if(Object(g.a)()===f.c.Root)return u.createElement(T,null);if(Object(g.a)()===f.c.TransactionList)return u.createElement(v.a,null);if(Object(g.a)()===f.c.TransactionChart)return u.createElement(b.a,null);if(Object(g.a)()===f.c.CategoryPage)return u.createElement(p.a,null);throw new Error("Invalid paths: "+Object(g.a)())},t}(u.Component),k=Object(s.hot)(e)(function(){return u.createElement(i.c,null,u.createElement(i.a,{path:"/",component:_}))})}).call(this,n(129)(e))},250:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(13),r=n(0),o=n.n(r),c=(n(193),n(7),n(556),n(75),function(e){var t=Object.assign({},{display:"flex",flexDirection:"row"},e.style),n=Object.assign({},e,{style:t});return o.a.createElement("div",a.a({},n))})},256:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(185),r=n(183),o=n(0),c=n(19),i=n(10),l=n(21),u=function(e){var t=o.useContext(l.a),n=o.useState(""),u=n[0],s=n[1],d=o.useState(""),p=d[0],m=d[1],f=function(){t.AuthenticateUser({username:u,password:p},"replace",function(e){sessionStorage.setItem("authToken",e.authToken),Object(c.c)(i.c.Root)})};return o.createElement("div",{style:{height:window.innerHeight+"px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},o.createElement(r.a,{label:"Username",onChange:function(e){return s(e.target.value)}}),o.createElement("br",null),o.createElement(r.a,{onChange:function(e){return m(e.target.value)},type:"password",label:"Password",onKeyPress:function(e){13==e.charCode&&f()}}),o.createElement("br",null),o.createElement(a.a,{variant:"contained",color:"primary",onClick:function(){return f()}},"Login"))}},34:function(e,t,n){"use strict";var a,r,o;n.d(t,"b",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return c}),function(e){e.ListTransactions="ListTransactions",e.AuthenticateUser="AuthenticateUser",e.ListCategories="ListCategories",e.TreefyCategories="TreefyCategories",e.UpdateCategory="UpdateCategory",e.ListEvents="ListEvents",e.GetUserBalance="GetUserBalance",e.UpdateTransaction="UpdateTransaction",e.GetIncomeExpenseReport="GetIncomeExpenseReport",e.GetExpenseReport="GetExpenseReport",e.UploadStatement="UploadStatement",e.ImportFromPlaid="ImportFromPlaid",e.ImportFromWave="ImportFromWave",e.SignCheckPoint="SignCheckPoint",e.CreateTransaction="CreateTransaction",e.ArchiveTransaction="ArchiveTransaction"}(a||(a={})),function(e){e.CHECKPOINT="CHECKPOINT",e.STATEMENT_UPLOAD="STATEMENT_UPLOAD",e.BATCH_IMPORT="BATCH_IMPORT"}(r||(r={})),function(e){e.PC_MASTER="PC_MASTER",e.SCOTIA_MASTER="SCOTIA_MASTER",e.VISA="VISA",e.CHEQUE="CHEQUE"}(o||(o={}));var c={ListTransactions:function(e,t,n){return function(r){return r({type:a.ListTransactions,route:a.ListTransactions,data:e,updateType:t,successCallback:n})}},AuthenticateUser:function(e,t,n){return function(r){return r({type:a.AuthenticateUser,route:a.AuthenticateUser,data:e,updateType:t,successCallback:n})}},ListCategories:function(e,t,n){return function(r){return r({type:a.ListCategories,route:a.ListCategories,data:e,updateType:t,successCallback:n})}},TreefyCategories:function(e,t,n){return function(r){return r({type:a.TreefyCategories,route:a.TreefyCategories,data:e,updateType:t,successCallback:n})}},UpdateCategory:function(e,t,n){return function(r){return r({type:a.UpdateCategory,route:a.UpdateCategory,data:e,updateType:t,successCallback:n})}},ListEvents:function(e,t,n){return function(r){return r({type:a.ListEvents,route:a.ListEvents,data:e,updateType:t,successCallback:n})}},GetUserBalance:function(e,t,n){return function(r){return r({type:a.GetUserBalance,route:a.GetUserBalance,data:e,updateType:t,successCallback:n})}},UpdateTransaction:function(e,t,n){return function(r){return r({type:a.UpdateTransaction,route:a.UpdateTransaction,data:e,updateType:t,successCallback:n})}},GetIncomeExpenseReport:function(e,t,n){return function(r){return r({type:a.GetIncomeExpenseReport,route:a.GetIncomeExpenseReport,data:e,updateType:t,successCallback:n})}},GetExpenseReport:function(e,t,n){return function(r){return r({type:a.GetExpenseReport,route:a.GetExpenseReport,data:e,updateType:t,successCallback:n})}},UploadStatement:function(e,t,n){return function(r){return r({type:a.UploadStatement,route:a.UploadStatement,data:e,updateType:t,successCallback:n})}},ImportFromPlaid:function(e,t,n){return function(r){return r({type:a.ImportFromPlaid,route:a.ImportFromPlaid,data:e,updateType:t,successCallback:n})}},ImportFromWave:function(e,t,n){return function(r){return r({type:a.ImportFromWave,route:a.ImportFromWave,data:e,updateType:t,successCallback:n})}},SignCheckPoint:function(e,t,n){return function(r){return r({type:a.SignCheckPoint,route:a.SignCheckPoint,data:e,updateType:t,successCallback:n})}},CreateTransaction:function(e,t,n){return function(r){return r({type:a.CreateTransaction,route:a.CreateTransaction,data:e,updateType:t,successCallback:n})}},ArchiveTransaction:function(e,t,n){return function(r){return r({type:a.ArchiveTransaction,route:a.ArchiveTransaction,data:e,updateType:t,successCallback:n})}}}},35:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return u});var a=n(260),r=n.n(a),o=n(19);function c(e){return e.categories.filter(function(e){return e.is_selectable})}function i(e){return e.transactions||[]}function l(){var e=r.a.parse(o.b.location.search.split("?")[1]);return e&&e.urlState?JSON.parse(e.urlState):{}}var u=function(e){return e.authToken||sessionStorage.getItem("authToken")||""}},545:function(e,t,n){"use strict";n.r(t);var a,r,o=n(0),c=n(11),i=n(22),l=n(93),u=n(19),s=(n(289),n(18)),d=n(244),p=n.n(d),m=n(245),f=n(111),E=n(10),g=n(34),h=function(e){return function(t){return function(n){return n&&g.b[n.type]&&Object(f.b)({endpoint:n.route,jsonBody:n.data,authToken:sessionStorage.getItem("authToken")||e.getState().authToken||""}).then(function(t){t.ok?t.json().then(function(t){e.dispatch({type:"BUTLER_ANSWERED",updateType:n.updateType,response:t}),n.successCallback&&n.successCallback(t)}):401===t.status&&(sessionStorage.removeItem("jwt"),Object(u.c)(E.c.LoginPage))}),t(n)}}},b=n(112),y=n(246),v=(r=Object(s.applyMiddleware)(m.a,h,p()()),Object(s.createStore)(b.a,a,r));c.render(o.createElement(i.a,{store:v},o.createElement(l.b,{history:u.b},o.createElement(y.a,null))),document.getElementById("root"))},75:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(13),r=n(185),o=n(548),c=n(555),i=n(550),l=n(551),u=n(26),s=n.n(u),d=n(0),p=n(124),m=function(e){function t(t){var n=e.call(this,t)||this;return n.getInitialOption=function(){var e=s.a.get(n.props.instance,n.props.instancePropNameToUpdate,null);if(!e)return null;var t=n.props.choices.find(function(t){return t.value===e});if(!t)throw new Error(e+" not found ");return t},n.openDialog=function(e){n.setState({openDialog:!0})},n.closeDialog=function(){n.setState({openDialog:!1})},n.onSelectOption=function(e){var t,a=n.props;(0,a.onChange)(a.instance,((t={})[a.instancePropNameToUpdate]=e.value,t)),n.closeDialog()},n.state={openDialog:!1},n}return a.b(t,e),t.prototype.render=function(){var e=this.props.choices,t=this.getInitialOption();return d.createElement("div",null,d.createElement(r.a,{onClick:this.openDialog,variant:"outlined",color:"primary"},t?d.createElement(o.a,{style:{marginRight:"5px"}},t.mui_icon_id):null,t?t.label:"Select A Category"),d.createElement(c.a,{open:this.state.openDialog,fullWidth:!0,onClose:this.closeDialog},d.createElement(i.a,null,"Select a category"),d.createElement(l.a,null,d.createElement(p.a,{onSelectOption:this.onSelectOption,defaultValue:t?t.value:void 0,placeholder:"Select a category",options:e}))))},t}(d.Component)}},[[545,1,2]]]);