(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var a=window.location.protocol+"//"+window.location.hostname+":"+(window.location.port?"8000":""),r=a+"/api2";function o(e){var t=r+"/"+e.endpoint+"/",n=e.authToken;return fetch(t,{method:"POST",body:JSON.stringify(e.jsonBody),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:n?"JWT "+n:""}})}},117:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(0),r=a.createContext({})},12:function(e,t,n){"use strict";n.d(t,"c",function(){return a});var a,r=n(24);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.d}),function(e){e.Root="/",e.LoginPage="/LoginPage",e.TransactionList="/TransactionList",e.TransactionChart="/TransactionChart",e.CategoryListPage="/CategoryListPage"}(a||(a={}))},175:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n(7),r=n(555),o=n(271),i=n(257),c=n.n(i),l=n(258),s=n.n(l),u=n(12),p=n(33),d=n(0),m=n(122),f=n.n(m),h=n(16),E=n(15),b=n(259),g=n.n(b);c()(f.a.Highcharts),s()(f.a.Highcharts);var y=function(e){return{chart:{type:"column"},title:{text:"Income/Expense Report"},xAxis:{type:"category"},yAxis:{min:0,title:{text:"Spend",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:" dollars"},plotOptions:{bar:{dataLabels:{enabled:!0}},column:{dataLabels:{enabled:!0},allowPointSelect:!1,events:{click:e.onClickColumn}}},legend:{enabled:!0,layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,shadow:!0},credits:{enabled:!1}}},v=function(e){function t(t){var n=e.call(this,t)||this;n.onChangeReportType=function(e){n.showReport(e.target.value)};var a=y({onClickColumn:n.onClickColumn.bind(n)});return n.state={config:a,chart:null,reportTitle:"",report_type:t.initialReportType},n}return a.b(t,e),t.prototype.onClickColumn=function(e){if("INCOME_EXPENSE"===this.state.report_type)return console.log(e)},t.prototype.getReportTitle=function(e){return"INCOME_EXPENSE"==e?"Income/Expense Report":"Expense Report"},t.prototype.showReport=function(e){var t=this,n=new Date,a=new Date;a.setDate(a.getDate()-180);var r="INCOME_EXPENSE"===e?"GetIncomeExpenseReport":"GetExpenseReport";this.props.butler[r]({start_date:Object(p.c)(a),end_date:Object(p.c)(n)},"do-nothing",function(n){var a=g()({title:{text:t.getReportTitle(e)}},t.state.config),r=Object.assign({},a,n.chart_data);t.setState({chart:d.createElement(f.a,{config:r})}),t.setState({report_type:e,config:r})})},t.prototype.componentDidMount=function(){this.showReport(this.state.report_type)},t.prototype.render=function(){return this.state.config?d.createElement("div",null,d.createElement(r.a,{value:this.state.report_type,onChange:this.onChangeReportType},d.createElement(o.a,{value:"INCOME_EXPENSE"},"Income/Expense"),d.createElement(o.a,{value:"EXPENSE"},"Expense")),d.createElement("p",null,this.state.reportTitle),this.state.chart):d.createElement("p",null,"Loading ...")},t}(d.Component),C=Object(h.b)(null,function(e){return{butler:Object(E.bindActionCreators)(u.a,e)}})(v)},178:function(e,t,n){"use strict";var a=n(7),r=n(598),o=n(273),i=n(0),c=n(34),l=n(33),s=n(550),u=n(16),p=n(15),d=n(12),m=n(272),f=n(595),h=n(620),E=n(551),b=n(554),g=n(76),y=n(596),v=n(597),C=n(116),T=n(21),_=n(117),S=function(e){var t=i.useContext(_.a),n=e.event,a=t.event_id===n.event_type+"-"+n.id;if(n.event_type===d.b.CHECKPOINT)return i.createElement(w,{authToken:e.authToken,disabled:a,butler:e.butler,checkpoint:n});var r=function(e){if(e.event_type===d.b.CHECKPOINT)return"toll";if(e.event_type===d.b.BATCH_IMPORT)return{plaid:"grid_on",wave:"waves"}[e.origin];if(e.event_type===d.b.STATEMENT_UPLOAD)return"cloud_upload";throw new Error("not possible")}(n),c=function(e){return e.event_type===d.b.CHECKPOINT?"plus_one":null}(n);return i.createElement(m.a,{selected:a,disabled:a,button:!0,onClick:function(t){if(!t.event_type)throw new Error("not possible");e.butler.ListTransactions({start:0,end:40,event_id:t.event_type+"-"+t.id},"replace",function(e){return Object(T.c)(d.c.TransactionList,{event_id:t.event_type+"-"+t.id})})}},i.createElement(f.a,null,i.createElement(h.a,{title:n.event_type},i.createElement(E.a,{color:"primary"},r))),i.createElement(b.a,null,i.createElement(g.a,null,""+new Date(n.created_ts).toLocaleDateString()),i.createElement(g.a,{color:"textSecondary"},function(e){if(e.event_type===d.b.CHECKPOINT){var t=e;return t.signed_ts?"balance: "+t.signed_balance+"  Signed at "+new Date(t.signed_ts).toLocaleDateString():"Not Signed"}if(e.event_type===d.b.BATCH_IMPORT){var n=e;return n.origin+": "+n.start_date+" TO "+n.end_date}if(e.event_type===d.b.STATEMENT_UPLOAD){var a=e;return a.source+": "+a.first_date+" TO "+a.last_date}throw new Error("not possible")}(n))),c?i.createElement(y.a,null,i.createElement(o.a,null,i.createElement(E.a,null,c))):null)},w=function(e){var t=e.authToken,n=e.checkpoint,a=e.disabled,r=e.butler,c=n.signed_ts?"balance: "+n.signed_balance+"  Signed at "+new Date(n.signed_ts).toLocaleDateString():"Not Signed";return i.createElement(m.a,{selected:a,disabled:a,button:!0,onClick:function(e){if(!e.event_type)throw new Error("not possible");r.ListTransactions({start:0,end:40,event_id:e.event_type+"-"+e.id},"replace",function(t){return Object(T.c)(d.c.TransactionList,{event_id:e.event_type+"-"+e.id})})}},i.createElement(f.a,null,i.createElement(h.a,{title:n.event_type},n.signed_ts?i.createElement(E.a,{color:"primary"},"toll"):i.createElement(E.a,{style:{color:"green"}},"fiber_new"))),i.createElement(b.a,null,i.createElement(g.a,null,""+new Date(n.created_ts).toLocaleDateString()),i.createElement(g.a,{color:"textSecondary"},c)),i.createElement(y.a,null,i.createElement(v.a,{color:"secondary",variant:"contained",size:"small","aria-label":"Small outlined button group"},n.signed_ts?null:i.createElement(o.a,{size:"small",color:"secondary",onClick:function(){return r.SignCheckPoint({id:n.id},"merge-append")}},i.createElement(E.a,null,"plus_one")),i.createElement(o.a,{size:"small",color:"secondary",disabled:!t,onClick:function(){window.open(C.a+"/export-checkpoint/"+t+"/"+n.id+"/","_blank")}},i.createElement(E.a,null,"cloud_download")))))},x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.componentDidMount=function(){this.props.butler.ListEvents({},"replace")},t.prototype.render=function(){var e=this;return i.createElement("div",null,i.createElement(s.a,null,this.props.events.map(function(t,n){return i.createElement(S,{authToken:e.props.authToken,butler:e.props.butler,event:t,key:n})})))},t}(i.Component),O=Object(u.b)(function(e){return{events:e.events,authToken:Object(c.a)(e)}},function(e){return{butler:Object(p.bindActionCreators)(d.a,e)}})(x),k=n(179),j=n(24),A=(new Date).toISOString().slice(0,10),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={start_date:A,end_date:A},t.importTransactions=function(){"plaid"===t.props.origin?t.props.butler.ImportFromPlaid({start_date:t.state.start_date,end_date:t.state.end_date},"merge-append"):t.props.butler.ImportFromWave({start_date:t.state.start_date,end_date:t.state.end_date},"merge-append")},t.setStartDate=function(e){t.setState({start_date:e.target.value})},t.setEndDate=function(e){t.setState({end_date:e.target.value})},t}return a.b(t,e),t.prototype.render=function(){return i.createElement(r.a,{container:!0},i.createElement(r.a,{item:!0,xs:4},i.createElement(k.a,{type:"date",label:"from",value:this.state.start_date,onChange:this.setStartDate})),i.createElement(r.a,{item:!0,xs:4},i.createElement(k.a,{type:"date",label:"to",defaultValue:A,onChange:this.setEndDate})),i.createElement(r.a,{item:!0,xs:4},i.createElement(o.a,{onClick:this.importTransactions,style:{marginTop:"10px"},color:"primary",variant:"contained"},"Import")))},t}(i.Component),F=Object(u.b)(null,function(e){return{butler:Object(p.bindActionCreators)(j.a,e)}})(I),L=n(555),P=n(621),U=n(599),D=n(271),N=n(600),R=n(601),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onFileInputChange=function(e){var n=e.target.files[0],a=new FileReader;a.addEventListener("load",function(){return t.props.submitFileContent(a.result)},!1),n&&a.readAsText(n)},t}return a.b(t,e),t.prototype.render=function(){var e=this,t=this.props.button||i.createElement(o.a,{variant:"outlined",component:"span"},"Upload");return i.createElement("div",null,i.createElement("input",{id:"file-upload-form",hidden:!0,ref:function(t){return e.fileInput=t},onChange:this.onFileInputChange,type:"file"}),i.createElement("label",{htmlFor:"file-upload-form"},t))},t}(i.Component),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedSource:j.c.CHEQUE},t.onSelectType=function(e){t.setState({selectedSource:e.target.value})},t.submitFileContent=function(e){console.log(e),t.state.selectedSource.length&&e&&t.props.butler.UploadStatement({source:t.state.selectedSource,content:e},"merge-append")},t}return a.b(t,e),t.prototype.render=function(){var e=this;return i.createElement("div",{style:{paddingTop:"10px"}},i.createElement(P.a,{expanded:!0},i.createElement(U.a,null,i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(L.a,{value:this.state.selectedSource,onChange:this.onSelectType},["CHEQUE","PC_MASTER","SCOTIA_MASTER","VISA"].map(function(e){return i.createElement(D.a,{key:e,value:e},e)}))),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(M,{submitFileContent:this.submitFileContent})))),i.createElement(N.a,null),i.createElement(R.a,null,i.createElement(o.a,{size:"small",onClick:function(){e.props.onClose()}},"Cancel"))))},t}(i.Component),G=Object(u.b)(null,function(e){return{butler:Object(p.bindActionCreators)(j.a,e)}})(B),W=n(46),H={issued_date:{type:"date",required:!0},merchant:{type:"text",required:!0},notes:{type:"text",required:!1},category_id:{type:"number",required:!1},balance_adjust:{type:"number",required:!1},total_amount:{type:"number",required:!0}},q=function(e){var t=e.fieldName,n=e.updateField,a=e.instance,r=H[t],o=!1;return r.required&&!a[t]?o=!0:r.required&&"number"===r.type&&!a[t]&&(o=!0),i.createElement(k.a,{type:r.type,required:r.required,error:o,label:t,value:a[t],onChange:n(t)})},z=function(){return{transaction:{issued_date:Object(l.d)(),merchant:"",notes:"",category_id:47,total_amount:"0",balance_adjust:"0"}}},K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=z(),t.createTransaction=function(){t.props.butler.CreateTransaction(t.state.transaction,"merge-append",function(e){t.props.onClose()})},t.updateField=function(e){var n=t.state.transaction;return function(a){var r,o=Object.assign({},n,((r={})[e]=a.target.value,r));t.setState({transaction:o})}},t}return a.b(t,e),t.prototype.isValid=function(){var e=this.state.transaction;return[e.issued_date,e.merchant,+e.total_amount].every(Boolean)},t.prototype.render=function(){var e=this,t=this.props.selectableCategories,n=this.state.transaction;return i.createElement("div",{style:{paddingTop:"10px"}},i.createElement(P.a,{expanded:!0},i.createElement(U.a,null,i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(q,{instance:n,fieldName:"issued_date",updateField:this.updateField})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(q,{fieldName:"merchant",instance:n,updateField:this.updateField})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(q,{fieldName:"total_amount",instance:n,updateField:this.updateField})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(W.a,{instance:n,choices:t.map(function(e){return{value:e.id,label:e.description,mui_icon_id:e.mui_icon_id}}),instancePropNameToUpdate:"category_id",onChange:function(t,n){var a=Object.assign({},e.state.transaction,n);e.setState({transaction:a})}})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(q,{fieldName:"notes",instance:n,updateField:this.updateField})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(q,{fieldName:"balance_adjust",instance:n,updateField:this.updateField})))),i.createElement(N.a,null),i.createElement(R.a,null,i.createElement(o.a,{size:"small",onClick:function(){e.setState(z()),e.props.onClose()}},"Cancel"),i.createElement(o.a,{size:"small",color:"primary",onClick:this.createTransaction,disabled:!this.isValid()},"Save"))))},t}(i.Component),V=Object(u.b)(function(e){return{selectableCategories:Object(c.b)(e),balance:e.balance}},function(e){return{butler:Object(p.bindActionCreators)(d.a,e)}})(K),X=n(604),J=n(605),Q=n(246),$=n(606),Y=n(607),Z=n(608),ee=n(609),te=n(610),ne=n(611),ae=n(38),re=n.n(ae),oe=n(602),ie=n(269),ce=n(603),le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={anchorEl:null},t.debounced=ae.debounce(function(e){return t.props.butler.ListTransactions({search_text:e},"replace",function(t){return Object(T.c)(d.c.TransactionList,{search_text:e})})},500),t.onFocus=function(e){t.setState({anchorEl:e.currentTarget})},t.handleClose=function(e){t.setState({anchorEl:null})},t.onSearch=function(e){t.debounced(e.target.value)},t}return a.b(t,e),t.prototype.render=function(){var e=this,t=i.createElement(oe.a,{position:"start"},i.createElement(ce.a,null));return i.createElement("div",null,i.createElement(k.a,{onChange:this.onSearch,InputProps:{startAdornment:i.createElement(oe.a,{position:"start"},t)}}),i.createElement(ie.a,{open:!!this.state.anchorEl,anchorEl:this.state.anchorEl,onClose:this.handleClose,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},this.props.suggestions.map(function(t,n){return i.createElement(D.a,{key:n,onClick:function(){e.props.butler.ListTransactions({},"replace")}},t.label)})))},t}(i.Component),se=Object(u.b)(function(e,t){return{suggestions:[]}},function(e){return{butler:Object(p.bindActionCreators)(d.a,e)}})(le),ue=n(119),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showNewTransactionForm=function(){t.props.showForm("transaction")},t.showNewStatementForm=function(){t.props.showForm("statement")},t.showPlaidImportForm=function(){t.props.showForm("plaid")},t.showWaveImportForm=function(){t.props.showForm("wave")},t.toggleTimeline=function(){t.props.toggleTimeline()},t}return a.b(t,e),t.prototype.render=function(){return i.createElement(X.a,{position:"static",color:"default"},i.createElement(J.a,null,i.createElement(h.a,{title:"Timeline"},i.createElement(Q.a,{onClick:this.toggleTimeline},i.createElement($.a,null))),this.props.balance?i.createElement(g.a,{variant:"body1",key:"balance"},"Balance: $"+this.props.balance):null,i.createElement("div",{style:{flex:1}}),i.createElement(se,null),i.createElement(ue.b,{icon:i.createElement(Y.a,null)},i.createElement(D.a,{key:"new-transaction-menu",onClick:this.showNewTransactionForm},i.createElement(f.a,null,i.createElement(Z.a,null)),i.createElement(b.a,null,"Transaction")),i.createElement(D.a,{key:"new-statement-menu",onClick:this.showNewStatementForm},i.createElement(f.a,null,i.createElement(ee.a,null)),i.createElement(b.a,null,"Statement")),i.createElement(D.a,{key:"new-wave-menu",onClick:this.showWaveImportForm},i.createElement(f.a,null,i.createElement(te.a,{color:"primary"})),i.createElement(b.a,null,"Wave Import")),i.createElement(D.a,{key:"new-plaid-menu",onClick:this.showPlaidImportForm},i.createElement(f.a,null,i.createElement(ne.a,{color:"primary"})),i.createElement(b.a,null,"Plaid Import"))),i.createElement(Q.a,{onClick:function(){sessionStorage.removeItem("authToken"),window.location.href="/"}},i.createElement(E.a,{className:"material-icons"},"exit_to_app"))))},t}(i.Component),de=Object(u.b)(function(e,t){return{balance:e.balance}},function(){return{}})(pe),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){return i.createElement(E.a,{style:{color:"blue",float:"left"},className:"material-icons"},"grid_on")},t}(i.Component),fe=n(614),he=n(615),Ee=n(616),be=n(263),ge=n.n(be),ye=n(612),ve=n(613),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.prediction,a=t.onAccept,o=n.split?"Split ":"";return i.createElement("div",{style:{color:"rgb(0, 188, 212)",fontWeight:"bold"}},""+o+n.category_name+"?",i.createElement(r.a,{container:!0},i.createElement(r.a,{item:!0,xs:12,sm:1},i.createElement(Q.a,{onClick:function(){return a()}},i.createElement(ye.a,{color:"primary"}))),i.createElement(r.a,{item:!0,xs:12,sm:1},i.createElement(Q.a,{onClick:function(){return e.setState({declined:!0})}},i.createElement(ve.a,{color:"secondary"})))))},t}(i.Component),Te=function(e){function t(t){var n=e.call(this,t)||this;return n.state={declined:!1},n}return a.b(t,e),t.prototype.onSelectCategory=function(e,t){return this.props.butler.UpdateTransaction({id:e.id,category_id:t.category_id},"merge-append")},t.prototype.render=function(){var e=this.props,t=e.selectableCategories,n=e.transaction;return i.createElement(W.a,{instance:n,choices:t.map(function(e){return{value:e.id,mui_icon_id:e.mui_icon_id,label:e.description}}),instancePropNameToUpdate:"category_id",onChange:this.onSelectCategory.bind(this)})},t}(i.Component),_e=function(e){var t=e.transaction,n=e.category,a=e.onAccept,o=t.prediction;return o?i.createElement(Ce,{prediction:o,onAccept:function(){return a({id:t.id,category_id:o.category_id,balance_adjust:o.split?(parseFloat(t.total_amount)/2).toString():"0"})}}):i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:1},i.createElement(E.a,{className:"material-icons"},n?n.mui_icon_id:null)),i.createElement(r.a,{item:!0,xs:!0},n?i.createElement(g.a,{color:"textSecondary"},n.description):null))},Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAcceptSmartCat=function(e){t.props.butler.UpdateTransaction(a.a({},e),"merge-append",function(){return e.balance_adjust?t.props.butler.GetUserBalance({},"replace"):null})},t}return a.b(t,e),t.prototype.getCategory=function(){var e=this.props,t=e.transaction,n=e.selectableCategories;return t.category_id&&n.find(function(e){return e.id===t.category_id})||null},t.prototype.shouldComponentUpdate=function(e){return!(re.a.isEqual(e.transaction,this.props.transaction)&&e.expanded===this.props.expanded)},t.prototype.render=function(){var e=this,t=this.props,n=t.transaction,o=t.selectableCategories,c=t.expanded,s=t.onToggleExpansion,u=t.butler,p=this.getCategory();return i.createElement("div",null,i.createElement(P.a,{disabled:!n.editable,expanded:c,onChange:s},i.createElement(U.a,null,i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:3,sm:4},i.createElement(g.a,null,Object(l.b)(n.issued_date)),c?null:i.createElement(_e,{transaction:n,category:p,onAccept:this.onAcceptSmartCat})),i.createElement(r.a,{item:!0,xs:6,sm:4},n.origin_payload?i.createElement(h.a,{title:i.createElement(ge.a,{shouldExpandNode:function(){return!0},data:n.origin_payload})},n.origin_payload.anchor_account_name?i.createElement(E.a,{style:{color:"blue",float:"left"},className:"material-icons"},"waves"):i.createElement(me,null)):null,i.createElement(g.a,{variant:"body1"},n.merchant),i.createElement("div",null,i.createElement(g.a,{color:"textSecondary"},n.account_name),i.createElement(g.a,{color:"textSecondary"},n.plaid_category),i.createElement(g.a,{color:"textSecondary"},n.notes))),i.createElement(r.a,{item:!0,xs:3,sm:4,style:{paddingLeft:"40px"}},i.createElement(g.a,null,"$"+n.total_amount),+n.balance_adjust&&!c?i.createElement(g.a,{style:{color:+n.balance_adjust>0?"green":"red"}},"$"+n.balance_adjust):null))),i.createElement(fe.a,null,i.createElement(r.a,{container:!0,spacing:10},i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(k.a,{defaultValue:n.notes,helperText:"notes",onChange:function(e){return u.UpdateTransaction({id:n.id,notes:e.target.value},"merge-append")}})),i.createElement(r.a,{item:!0,xs:6,sm:4},i.createElement(Te,a.a({},{transaction:n,selectableCategories:o,butler:u}))),i.createElement(r.a,{item:!0,xs:6,sm:3},i.createElement(k.a,{helperText:"Balance Adjust",type:"number",defaultValue:n.balance_adjust,onChange:function(t){return u.UpdateTransaction({id:n.id,balance_adjust:t.target.value},"merge-append",function(){return e.props.butler.GetUserBalance({},"replace")})}})),i.createElement(r.a,{item:!0,xs:6,sm:1,style:{textAlign:"right"}},i.createElement(he.a,{size:"medium",color:"secondary","aria-label":"Delete",onClick:function(){return e.props.butler.ArchiveTransaction({id:n.id},"remove")}},i.createElement(Ee.a,null)))))))},t}(i.Component),we=Object(u.b)(function(e){return{selectableCategories:Object(c.b)(e),balance:e.balance}},function(e){return{butler:Object(p.bindActionCreators)(j.a,e)}})(Se);n.d(t,"a",function(){return ke});var xe=40,Oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expandedTransactionId:null,shownForm:null,showTimeline:!0},t.toggleTimeline=function(){return t.setState({showTimeline:!t.state.showTimeline})},t.loadMoreTransactions=function(){var e=t.props.transactions.length,n=e+xe;t.props.butler.ListTransactions({start:e,end:n},"merge-append")},t.showForm=function(e){t.setState({shownForm:e})},t.closeForm=function(){return t.setState({shownForm:null})},t}return a.b(t,e),t.prototype.componentDidMount=function(){this.props.selectableCategories.length||this.props.butler.ListCategories({},"replace"),this.props.butler.GetUserBalance({},"replace"),this.loadMoreTransactions()},t.prototype.onToggleExpansion=function(e){e===this.state.expandedTransactionId?this.setState({expandedTransactionId:null}):this.setState({expandedTransactionId:e})},t.prototype.render=function(){var e=this,t=this.props.selectableCategories,n=this.state.showTimeline;return t&&t.length?i.createElement("div",{style:{maxWidth:"100%"}},i.createElement(de,{toggleTimeline:this.toggleTimeline,showForm:this.showForm}),i.createElement("div",{style:{height:window.innerHeight-70,overflow:"scroll"}},i.createElement(r.a,{container:!0},n?i.createElement(r.a,{item:!0,sm:3},i.createElement(O,null)):null,i.createElement(r.a,{item:!0,sm:n?9:12},i.createElement("div",{style:{marginBottom:"20px"}},"transaction"===this.state.shownForm?i.createElement(V,{onClose:this.closeForm}):null,"statement"===this.state.shownForm?i.createElement(G,{onClose:this.closeForm}):null,"plaid"===this.state.shownForm?i.createElement(F,{origin:"plaid"}):null,"wave"===this.state.shownForm?i.createElement(F,{origin:"wave"}):null),this.props.transactions.map(function(t){return i.createElement(we,{expanded:e.state.expandedTransactionId===t.id,key:t.id,transaction:t,onToggleExpansion:function(n,a){return e.onToggleExpansion(t.id)}})}),i.createElement(o.a,{fullWidth:!0,size:"large",color:"secondary",onClick:this.loadMoreTransactions},"(",this.props.transactions.length,") Click to Load More ..."))))):null},t}(i.Component),ke=Object(l.a)(function(e){return{transactions:Object(c.c)(e),selectableCategories:Object(c.b)(e)}})(Oe)},180:function(e,t,n){"use strict";var a=n(7),r=n(310),o=n(76),i=n(46),c=n(0),l=n(618),s=n(554),u=n(272),p=n(550),d=function(e){var t=e.ident,n=a.c(e,["ident"]);return t?c.createElement(s.a,a.a({},n,{style:{paddingLeft:56*t+"px"}})):c.createElement(s.a,a.a({},n))};var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){return c.createElement(p.a,null,this.props.root.children.map(function(e){return function e(t,n){return[c.createElement(u.a,{key:t.id},c.createElement(d,{ident:n},c.createElement(l.a,null),t.id))].concat(t.children.map(function(t){return e(t,n+1)}))}(e,0)}).flat(1e3))},t}(c.Component),f=n(16);n.d(t,"a",function(){return E});var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){var e=this;return c.createElement("div",null,c.createElement(m,{root:{id:"1",children:[]}}),c.createElement("div",null,this.props.categories.map(function(t){return e.getCard(t)})))},t.prototype.onSelectIcon=function(e,t){},t.prototype.getCard=function(e){var t=this.props.iconChoices.map(function(e){return{value:e.name,mui_icon_id:e.value,label:e.name}});return c.createElement(r.a,{key:e.id},c.createElement(o.a,{style:{display:"flex"}},e.description),c.createElement(i.a,{style:{flex:1},instance:e,choices:t,instancePropNameToUpdate:"mui_icon_id",onChange:this.onSelectIcon.bind(this)}))},t}(c.Component),E=Object(f.b)(function(e){return{categories:e.categories,iconChoices:[],CategoryTree:{}}},function(e){return{}})(h)},21:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i});var a=n(41),r=Object(a.a)(),o=function(e,t,n){void 0===n&&(n=null);var a=t&&t&&Object.keys(t).length?"?urlState="+JSON.stringify(t):"";return r.push({pathname:e,search:a,state:n})},i=function(){var e=r.location.pathname;return e.endsWith("/")?e.slice(0,e.length-1)||"/":e}},24:function(e,t,n){"use strict";var a,r,o;n.d(t,"b",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),function(e){e.ListTransactions="ListTransactions",e.AuthenticateUser="AuthenticateUser",e.ListCategories="ListCategories",e.ListEvents="ListEvents",e.GetUserBalance="GetUserBalance",e.UpdateTransaction="UpdateTransaction",e.GetIncomeExpenseReport="GetIncomeExpenseReport",e.GetExpenseReport="GetExpenseReport",e.UploadStatement="UploadStatement",e.ImportFromPlaid="ImportFromPlaid",e.ImportFromWave="ImportFromWave",e.SignCheckPoint="SignCheckPoint",e.CreateTransaction="CreateTransaction",e.ArchiveTransaction="ArchiveTransaction"}(a||(a={})),function(e){e.CHECKPOINT="CHECKPOINT",e.STATEMENT_UPLOAD="STATEMENT_UPLOAD",e.BATCH_IMPORT="BATCH_IMPORT"}(r||(r={})),function(e){e.PC_MASTER="PC_MASTER",e.SCOTIA_MASTER="SCOTIA_MASTER",e.VISA="VISA",e.CHEQUE="CHEQUE"}(o||(o={}));var i={ListTransactions:function(e,t,n){return function(r){return r({type:a.ListTransactions,route:a.ListTransactions,data:e,updateType:t,successCallback:n})}},AuthenticateUser:function(e,t,n){return function(r){return r({type:a.AuthenticateUser,route:a.AuthenticateUser,data:e,updateType:t,successCallback:n})}},ListCategories:function(e,t,n){return function(r){return r({type:a.ListCategories,route:a.ListCategories,data:e,updateType:t,successCallback:n})}},ListEvents:function(e,t,n){return function(r){return r({type:a.ListEvents,route:a.ListEvents,data:e,updateType:t,successCallback:n})}},GetUserBalance:function(e,t,n){return function(r){return r({type:a.GetUserBalance,route:a.GetUserBalance,data:e,updateType:t,successCallback:n})}},UpdateTransaction:function(e,t,n){return function(r){return r({type:a.UpdateTransaction,route:a.UpdateTransaction,data:e,updateType:t,successCallback:n})}},GetIncomeExpenseReport:function(e,t,n){return function(r){return r({type:a.GetIncomeExpenseReport,route:a.GetIncomeExpenseReport,data:e,updateType:t,successCallback:n})}},GetExpenseReport:function(e,t,n){return function(r){return r({type:a.GetExpenseReport,route:a.GetExpenseReport,data:e,updateType:t,successCallback:n})}},UploadStatement:function(e,t,n){return function(r){return r({type:a.UploadStatement,route:a.UploadStatement,data:e,updateType:t,successCallback:n})}},ImportFromPlaid:function(e,t,n){return function(r){return r({type:a.ImportFromPlaid,route:a.ImportFromPlaid,data:e,updateType:t,successCallback:n})}},ImportFromWave:function(e,t,n){return function(r){return r({type:a.ImportFromWave,route:a.ImportFromWave,data:e,updateType:t,successCallback:n})}},SignCheckPoint:function(e,t,n){return function(r){return r({type:a.SignCheckPoint,route:a.SignCheckPoint,data:e,updateType:t,successCallback:n})}},CreateTransaction:function(e,t,n){return function(r){return r({type:a.CreateTransaction,route:a.CreateTransaction,data:e,updateType:t,successCallback:n})}},ArchiveTransaction:function(e,t,n){return function(r){return r({type:a.ArchiveTransaction,route:a.ArchiveTransaction,data:e,updateType:t,successCallback:n})}}}},245:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return w});var a=n(7),r=n(550),o=n(272),i=n(554),c=n(85),l=n(180),s=n(15),u=n(12),p=n(253),d=n(21),m=n(256),f=n(175),h=n(34),E=n(178),b=n(0),g=n(264),y=n(16),v=n(117),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){return b.createElement(p.a,null,b.createElement("div",{style:{maxWidth:"100%",flex:8}},b.createElement(v.a.Provider,{value:this.props.urlState},b.createElement(S,{isAuthenticated:this.props.isAuthenticated}))))},t}(b.Component),T=Object(y.b)(function(e,t){return{isAuthenticated:!(!e.authToken&&!sessionStorage.getItem("authToken")),urlState:Object(h.d)()}},function(e){return{butler:Object(s.bindActionCreators)(u.a,e)}})(C),_=function(){var e={TransactionList:E.a,TransactionChart:f.a,CategoryListPage:l.a};return b.createElement(r.a,null,Object.keys(e).map(function(e,t){return b.createElement(o.a,{key:t,button:!0,onClick:function(){return Object(d.c)(e)}},b.createElement(i.a,{primary:e}))}))},S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.render=function(){if(Object(d.a)()===u.c.LoginPage)return b.createElement(m.a,null);if(!this.props.isAuthenticated)return console.warn("not authenticated!!!"),Object(d.c)(u.c.LoginPage),b.createElement("div",null);if(Object(d.a)()===u.c.Root)return b.createElement(_,null);if(Object(d.a)()===u.c.TransactionList)return b.createElement(E.a,null);if(Object(d.a)()===u.c.TransactionChart)return b.createElement(f.a,null);if(Object(d.a)()===u.c.CategoryListPage)return b.createElement(l.a,null);throw new Error("Invalid paths: "+Object(d.a)())},t}(b.Component),w=Object(g.hot)(e)(function(){return b.createElement(c.c,null,b.createElement(c.a,{path:"/",component:T}))})}).call(this,n(125)(e))},253:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(7),r=n(0),o=n.n(r),i=(n(196),n(6),n(558),n(46),function(e){var t=Object.assign({},{display:"flex",flexDirection:"row"},e.style),n=Object.assign({},e,{style:t});return o.a.createElement("div",a.a({},n))})},256:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(7),r=n(273),o=n(179),i=n(0),c=n(16),l=n(15),s=n(21),u=n(12),p=n(24),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.b(t,e),t.prototype.onUsernameChange=function(e){this.setState({username:e.target.value})},t.prototype.onPasswordChange=function(e){this.setState({password:e.target.value})},t.prototype.submitLogin=function(){this.props.butler.AuthenticateUser({username:this.state.username,password:this.state.password},"replace",function(e){sessionStorage.setItem("authToken",e.authToken),Object(s.c)(u.c.Root)})},t.prototype.render=function(){var e=this;return i.createElement("div",{style:{height:window.innerHeight+"px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},i.createElement(o.a,{label:"Username",onChange:this.onUsernameChange.bind(this)}),i.createElement("br",null),i.createElement(o.a,{onChange:this.onPasswordChange.bind(this),type:"password",label:"Password",onKeyPress:function(t){13==t.charCode&&e.submitLogin()}}),i.createElement("br",null),i.createElement(r.a,{variant:"contained",color:"primary",onClick:function(){return e.submitLogin()}},"Login"))},t}(i.Component),m=Object(c.b)(null,function(e){return{butler:Object(l.bindActionCreators)(p.a,e)}})(d)},33:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return p});var a=n(16),r=n(15),o=n(24);function i(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"})}var c=function(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())};function l(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())}var s=function(e,t,n){return t.reduce(function(t,a){var r=e.findIndex(function(e){return e.id===a.id});return r>=0?t.slice(0,r).concat([a],t.slice(r+1,t.length)):"append"===n?t.concat([a]):[a].concat(t)},e.slice())},u=function(e){return{butler:Object(r.bindActionCreators)(o.a,e)}},p=function(e){return Object(a.b)(e,u)}},34:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return s});var a=n(21),r=n(260),o=n.n(r);function i(e){return e.categories.filter(function(e){return e.is_selectable})}function c(e){return e.transactions||[]}function l(){var e=o.a.parse(a.b.location.search.split("?")[1]);return e&&e.urlState?JSON.parse(e.urlState):{}}var s=function(e){return e.authToken||sessionStorage.getItem("authToken")||""}},46:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(7),r=n(273),o=n(551),i=n(556),c=n(552),l=n(553),s=n(38),u=n.n(s),p=n(0),d=n(119),m=function(e){function t(t){var n=e.call(this,t)||this;return n.getInitialOption=function(){var e=u.a.get(n.props.instance,n.props.instancePropNameToUpdate,null);if(!e)return null;var t=n.props.choices.find(function(t){return t.value===e});if(!t)throw new Error(e+" not found ");return t},n.openDialog=function(e){n.setState({openDialog:!0})},n.closeDialog=function(){n.setState({openDialog:!1})},n.onSelectOption=function(e){var t,a=n.props;(0,a.onChange)(a.instance,((t={})[a.instancePropNameToUpdate]=e.value,t)),n.closeDialog()},n.state={openDialog:!1},n}return a.b(t,e),t.prototype.render=function(){var e=this.props.choices,t=this.getInitialOption();return p.createElement("div",null,p.createElement(r.a,{onClick:this.openDialog,variant:"outlined",color:"primary"},t?p.createElement(o.a,{style:{marginRight:"5px"}},t.mui_icon_id):null,t?t.label:"Select A Category"),p.createElement(i.a,{open:this.state.openDialog,fullWidth:!0,onClose:this.closeDialog},p.createElement(c.a,null,"Select a category"),p.createElement(l.a,null,p.createElement(d.a,{onSelectOption:this.onSelectOption,defaultValue:t?t.value:void 0,placeholder:"Select a category",options:e}))))},t}(p.Component)},549:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(13),o=n(16),i=n(85),c=n(21),l=n(245),s=(n(544),n(15)),u=n(266),p=n.n(u),d=n(267),m=n(12),f=n(116),h=n(24),E=function(e){return function(t){return function(n){return n&&h.b[n.type]&&Object(f.b)({endpoint:n.route,jsonBody:n.data,authToken:sessionStorage.getItem("authToken")||e.getState().authToken||""}).then(function(t){t.ok?t.json().then(function(t){e.dispatch({type:"BUTLER_ANSWERED",updateType:n.updateType,response:t}),n.successCallback&&n.successCallback(t)}):401===t.status&&(sessionStorage.removeItem("jwt"),Object(c.c)(m.c.LoginPage))}),t(n)}}},b=n(617),g=n(38),y=n(33),v="",C=[],T=[],_=null,S=[];var w,x,O=(w=[],x={EAT_SNACK:function(e){return e.slice(1).slice()},ADD_SNACK:function(e,t){return e.concat([t.snack])}},function(e,t){return void 0===e&&(e=w),x.hasOwnProperty(t.type)?x[t.type](e,t):e}),k=function(e,t,n){return Object(b.a)("BUTLER_ANSWERED",function(t,a){if(!a.response[e])return t;if("replace"===a.updateType)return a.response[e];if("do-nothing"===a.updateType)return t;if("remove"===a.updateType)return t.slice().filter(function(t){return!a.response[e].find(function(e){return e.id===t.id})});if("merge-append"===a.updateType){var r=Object(y.e)(t,a.response[e],"append");return n?g.sortBy(r,n):r}throw new Error("not handled")},t)},j=Object(s.combineReducers)({snacks:O,transactions:k("transactions",S,function(e){return-1*e.issued_date}),authToken:k("authToken",_),categories:k("categories",T),events:k("events",C,function(e){return-1*new Date(e.created_ts).getTime()}),balance:k("balance",v)}),A=function(e){var t=Object(s.applyMiddleware)(d.a,E,p()());return Object(s.createStore)(j,e,t)}();r.render(a.createElement(o.a,{store:A},a.createElement(i.b,{history:c.b},a.createElement(l.a,null))),document.getElementById("root"))}},[[549,1,2]]]);